(function(){var B=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var c in d)d.hasOwnProperty(c)&&(a[c]=d[c])};return function(h,d){function c(){this.constructor=h}a(h,d);h.prototype=null===d?Object.create(d):(c.prototype=d.prototype,new c)}}(),l;(function(a){var h;a.Namespace=function(a){if(!h){var c=a._fs_loaded;h=c?c:a._fs_namespace?a._fs_namespace:"FS"}return h};a.isLoaded=function(a){return a._fs_loaded};
a.setLoaded=function(a,c){a._fs_loaded=c;c in a||(a[c]={})}})(l||(l={}));(function(a){a._fs_debug=function(a){return!!a._fs_ext_debug||!!a._fs_debug};a._fs_host=function(a){return(a=a._fs_ext_host||a._fs_host)&&0==a.lastIndexOf("www.",0)?a.substring(4):a};a._fs_org=function(a){return a._fs_ext_org||a._fs_org};a._fs_csp=function(a){return a._fs_csp};a._fs_cookie_domain=function(a){return a._fs_cookie_domain};a._fs_ready=function(a){return a._fs_ready};a._fs_run_in_iframe=function(a){return!!a._fs_run_in_iframe};
a._fs_is_outer_script=function(a){return!!a._fs_is_outer_script};a._fs_replay_flags=function(a){return a._fs_replay_flags};a._fs_transport=function(a){return a._fs_transport};a.set_fs_shutdown=function(a,d){a._fs_shutdown=d};a.FS_q_drain=function(h){if((h=h[a.Namespace(h)])&&"q"in h){var d=h.q;delete h.q;return d}return[]};a.FS_q_push=function(h,d){var c=h[a.Namespace(h)];"q"in c||(c.q=[]);c.q.push(d)}})(l||(l={}));(function(a){a.windex=window;var h;a.initWindex=function(d){if(d.document&&d.document.head){if(h)try{a.windex.JSON.stringify(0);
return}catch(c){}var b=d.document.head,e=d.document.createElement("iframe");e.id="FullStory-iframe";e.className="fs-hide";e.setAttribute("style","display: none;");b.appendChild(e);e.src="about:blank";h=e;a.windex=h.contentWindow;d.document.head.removeChild(h);try{a.windex.JSON.stringify(0)}catch(g){a.windex=d}}}})(l||(l={}));(function(a){function h(a){g&&window.console&&console.log(a)}function d(b,c){var f=0;try{a.windex.JSON.stringify(b,function(a,b){if(f++>c)throw"break";return"object"!=typeof b?
void 0:b})}catch(e){if("break"!=e)return!0}return!1}function c(f,e,m,g){if(1>e)return 0;var k;f&&f.constructor==Date?k=isNaN(f)?"Invalid Date":f.toUTCString():(k="object"===typeof Node?f instanceof Node:f&&"object"===typeof f&&0<f.nodeType&&"string"===typeof f.nodeName,k=k?b(f):void 0===f?"undefined":"object"!=typeof f||null==f?f:f instanceof Error?f.stack||f.name+": "+f.message:void 0);if(void 0!==k){k=a.windex.JSON.stringify(k);if(void 0===k)return 0;'"'==k[0]&&(k=z(k,e,'..."'));return k.length<=
e?(g.tokens.push(k),k.length):0}if(g.catchCycles){g.opath.splice(m);k=g.opath.lastIndexOf(f);if(-1<k)return f='"'+z("<Cycle to ancestor #"+(m-k-1)+">",e-2)+'"',g.tokens.push(f),f.length;g.opath.push(f)}var d=e,n=function(a){return d>=a.length?(d-=a.length,g.tokens.push(a),!0):!1};k=function(a){","==g.tokens[g.tokens.length-1]?g.tokens[g.tokens.length-1]=a:n(a)};if(2>d)return 0;if(a.isArray(f)){n("[");for(var h=0;h<f.length&&0<d;h++){var w=c(f[h],d-1,m+1,g),d=d-w;if(0==w&&!n("null"))break;n(",")}k("]")}else{n("{");
for(var x=Object.keys(f),h=0;h<x.length&&0<d;h++){var w=x[h],C=f[w];if(!n('"'+w+'":'))break;w=c(C,d-1,m+1,g);if(0==w){g.tokens.pop();break}d-=w;n(",")}k("}")}return Infinity==e?1:e-d}function b(a){if(a.tagName){var b=e(a);return"<"+b+(a.attributes&&a.attributes.type?' type="'+a.attributes.type.value+'"':"")+(a.id?' id="'+a.id+'"':"")+(a.className?' class="'+a.className+'"':"")+">...</"+b+">"}b="";a.data&&a.data.substring&&(b=" "+a.data.substring(0,50)+(50<a.data.length?"...":""));return a.nodeName+
b}function e(a){return"object"==typeof a.tagName?"form":a.tagName.toLowerCase()}var g=!1;a.bind=Function.prototype.bind?function(a,b){for(var c=[],f=2;f<arguments.length;f++)c[f-2]=arguments[f];return a.bind.apply(a,[b].concat(c))}:function(a,b){for(var c=[],f=2;f<arguments.length;f++)c[f-2]=arguments[f];return function(){var f=Array.prototype.slice.call(arguments);a.call.apply(a,[b].concat(c,f))}};a._native_filter=function(a,b,c){return a.filter(b,c)};a._js_filter=function(a,b,c){for(var f=Array(a.length),
e=0;e<a.length;e++)f[e]=b.call(c,a[e],e,a);return f};a.filter=Array.prototype.filter?a._native_filter:a._js_filter;var f=function(b){return a.windex.Array.isArray(b)},m=function(b){return"[object Array]"==a.windex.Object.prototype.toString.call(b)};a.isArray=a.windex.Array.isArray?f:m;a.firstKey=function(a){for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b))return b};a.firstValue=function(a){for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b))return a[b]};a.hasNKeys=function(a,b){var c=
0,f;for(f in a)if(Object.prototype.hasOwnProperty.call(a,f)&&++c>b)return!1;return c==b};a.hasMoreThanNKeys=function(a,b){var c=0,f;for(f in a)if(Object.prototype.hasOwnProperty.call(a,f)&&++c>b)return!0;return!1};a.$entry=function(a,b){return a&&a.apply?function(){try{return a.apply(b||this,arguments)}catch(c){}}:a};a.initDebug=function(b){g=a._fs_debug(b)};a.isDebug=function(){return g};a.logIfDebug=h;a.logFSError=function(a){};a.stringify=function(a,b,f){void 0===b&&(b=Infinity);void 0===f&&(f=
!0);try{var e={tokens:[],opath:[],catchCycles:f&&d(a,b/4)};c(a,b,0,e);return e.tokens.join("")}catch(g){a="Internal error: unable to determine what JSON error was";try{a=""+g,a=a.replace(/[^a-zA-Z0-9\.\:\!\, ]/g,"_")}catch(m){}return'"'+a+'"'}};var z=function(a,b,c){void 0===c&&(c="...");return a.length<=b?a:a.length<=c.length||b<=c.length?a.substring(0,b):a.substring(0,b-c.length)+c};a.baseUri=function(a){return"string"==typeof a.baseURI?a.baseURI:(a=a.getElementsByTagName("base")[0])&&a.href?a.href:
location.href};a.doctypeString=function(a){a=a.doctype;if(!a)return"";var b;b="<!DOCTYPE "+a.name;a.publicId&&(b+=' PUBLIC "'+a.publicId+'"');a.systemId&&(b+=' "'+a.systemId+'"');return b+">"};a.parseJson=function(b){return a.windex.JSON.parse(b)};a.domainFromHost=function(a){var b=a.indexOf(":");0<=b&&(a=a.slice(0,b));return a};a.isLocalhost=function(a){return"localhost"==a||"127.0.0.1"==a};a.tryGetScreenDims=function(a){var b=0,c=0;if(null==a.screen)return[b,c];b=parseInt(String(a.screen.width));
c=parseInt(String(a.screen.height));b=isNaN(b)?0:b;c=isNaN(c)?0:c;return[b,c]};f=function(){function a(){this._listeners=[];this._yesCapture=!0;this._noCapture=!1;try{var b=Object.defineProperty({},"passive",{get:function(){this._yesCapture={capture:!0,passive:!0};this._noCapture={capture:!1,passive:!0}}});window.addEventListener("test",function(){},b)}catch(c){}}a.prototype.add=function(a,b,c,f){c={target:a,type:b,fn:function(a){f(a)},options:c?this._yesCapture:this._noCapture,index:this._listeners.length};
this._listeners.push(c);a.addEventListener(b,c.fn,c.options);return c};a.prototype.remove=function(a){a.target&&(a.target.removeEventListener(a.type,a.fn,a.options),a.target=null,a.fn=void 0)};a.prototype.clear=function(){for(var a=0;a<this._listeners.length;a++)this._listeners[a].target&&this.remove(this._listeners[a]);this._listeners=[]};return a}();a.DomListeners=f;var k=function(){function a(b,c){this.name=b;this._native=c;this.on=!0}a.prototype.before=function(a){this._before=a;return this};
a.prototype.afterAsync=function(a){this._afterAsync=a;return this};a.prototype.afterSync=function(a){this._afterSync=a;return this};a.prototype.disable=function(){this.on=!1};a.prototype.enable=function(){this.on=!0};a.prototype.getShim=function(){this.shim||this.setupShim();return this.shim};a.prototype.setupShim=function(){var a=this;this.shim=function(){var b={that:this,args:arguments};if(a.on)try{a._before&&a._before.call(this,b)}catch(c){h("Error in hook before "+a.name)}var f=a._native.apply(this,
arguments);if(a.on)try{if(a._afterSync&&a._afterSync.call(this,b),a._afterAsync){var e=this;setTimeout(function(){try{a._afterAsync.call(e,b)}catch(c){h("Error in async hook after "+a.name)}})}}catch(g){h("Error in hook after "+a.name)}return f}};return a}(),n={};a.activateHook=function(a,b){n[b]=n[b]||[];for(var c,f=0;f<n[b].length;f++)n[b][f].obj==a&&(c=n[b][f].hook);c||(c=new k(b,a[b]),n[b].push({obj:a,hook:c}),a[b]=c.getShim());c.enable();return c};a.tagName=e})(l||(l={}));(function(a){a.EVENT_MUT_INSERT=
2;a.EVENT_MUT_REMOVE=3;a.EVENT_MUT_ATTR=4;a.EVENT_MUT_ATTR_CURVE=5;a.EVENT_MUT_TEXT=6;a.EVENT_MUT_SKIPIDS=7;a.EVENT_MOUSEMOVE=8;a.EVENT_MOUSEMOVE_CURVE=9;a.EVENT_SCROLL=10;a.EVENT_SCROLL_CURVE=11;a.EVENT_MOUSEDOWN=12;a.EVENT_MOUSEUP=13;a.EVENT_KEYDOWN=14;a.EVENT_KEYUP=15;a.EVENT_CLICK=16;a.EVENT_FOCUS=17;a.EVENT_VALUECHANGE=18;a.EVENT_RESIZE=19;a.EVENT_DOMLOADED=20;a.EVENT_LOAD=21;a.EVENT_PLACEHOLDER_SIZE=22;a.EVENT_UNLOAD=23;a.EVENT_BLUR=24;a.EVENT_SET_FRAME_BASE=25;a.EVENT_TOUCHSTART=32;a.EVENT_TOUCHEND=
33;a.EVENT_TOUCHCANCEL=34;a.EVENT_TOUCHMOVE=35;a.EVENT_TOUCHMOVE_CURVE=36;a.EVENT_NAVIGATE=37;a.EVENT_PLAY=38;a.EVENT_PAUSE=39;a.EVENT_INNERWIDTH=40;a.EVENT_INNERWIDTH_CURVE=41;a.EVENT_LOG=48;a.EVENT_ERROR=49;a.EVENT_DBL_CLICK=50;a.EVENT_FORM_SUBMIT=51;a.EVENT_WINDOW_FOCUS=52;a.EVENT_WINDOW_BLUR=53;a.EVENT_HEARTBEAT=54;a.NAVIGATION_TIMING=55;a.EVENT_SYS_SETMETA=8192;a.EVENT_SYS_SETVAR=8193;a.EVENT_SYS_HIGHLIGHT=8194;a.EVENT_COOKED_LOAD="load";a.EVENT_COOKED_UNLOAD="unload";a.EVENT_COOKED_NAVIGATE=
"navigate";a.EVENT_COOKED_CLICK="click";a.EVENT_COOKED_TAP="tap";a.EVENT_COOKED_FOCUS="focus";a.EVENT_COOKED_CHANGE="change";a.EVENT_COOKED_MOUSE_THRASH="thrash";a.EVENT_FORM_ABANDONED="abandon";a.isUserActionEvent=function(h){switch(h){case a.EVENT_MOUSEDOWN:case a.EVENT_MOUSEMOVE:case a.EVENT_MOUSEMOVE_CURVE:case a.EVENT_MOUSEUP:case a.EVENT_KEYDOWN:case a.EVENT_KEYUP:case a.EVENT_TOUCHSTART:case a.EVENT_TOUCHEND:case a.EVENT_TOUCHMOVE:case a.EVENT_TOUCHMOVE_CURVE:case a.EVENT_TOUCHCANCEL:case a.EVENT_CLICK:case a.EVENT_SCROLL:case a.EVENT_SCROLL_CURVE:case a.EVENT_NAVIGATE:return!0}return!1};
a.MAX_LOGS_PER_PAGE=1024})(l||(l={}));(function(a){a.HighlightTypeFsId="fsidentity";a.HighlightTypeNewUid="newuid";a.UID_COOKIE="fs_uid";a.BAD_APP_IDS=" 0 1 -1 n/a nan undefined null nil the_id_that_you_use_in_your_app_for_this_user".split(" ");var h=function(){function d(a){void 0===a&&(a=document);this._doc=a;this._cookies={}}d.prototype.initFromCookies=function(c,b){for(var e=this._doc.cookie.split(";"),g=0;g<e.length;g++){var f=e[g].replace(/^\s+|\s+$/g,"").split("="),m=f[0];this._cookies[m]||
(this._cookies[m]=f[1])}var d=this._cookies[a.UID_COOKIE],k=m=f=g=e="";if(d){var n=d.split("`");3>n.length?e=d:(f=n[0],m=n[1],e=n[2],5<=n.length&&(k=decodeURIComponent(n[3]),0<=a.BAD_APP_IDS.indexOf(k)&&(a.logIfDebug('ignoring invalid app key "'+k+'" from cookie.'),k="")))}d=e.indexOf(":");-1!=d&&(g=e.slice(d+1),e=e.slice(0,d));this._cookie={Host:f,OrgId:m,UserId:e,SessionId:g,AppKey:k};if(this._cookie.Host!=c||this._cookie.OrgId!=b)this._cookie={Host:c,OrgId:b,UserId:"",SessionId:"",AppKey:""}};
d.prototype.initFromParsedCookie=function(a){this._cookie=a};d.prototype.clear=function(){var a=this.host(),b=this.orgId();this._cookie={Host:a,OrgId:b,UserId:"",SessionId:"",AppKey:""};this.write()};d.prototype.host=function(){return this._cookie.Host};d.prototype.orgId=function(){return this._cookie.OrgId};d.prototype.userId=function(){return this._cookie.UserId};d.prototype.sessionId=function(){return this._cookie.SessionId};d.prototype.appKey=function(){return this._cookie.AppKey};d.prototype.cookieData=
function(){return this._cookie};d.prototype.cookies=function(){return this._cookies};d.prototype.setCookie=function(a,b){var e=a+"="+b,e=this._domain?e+("; domain=."+encodeURIComponent(this._domain)):e+"; domain=";this._doc.cookie=e+"; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/"};d.prototype.setIds=function(c,b,e,g){a.isLocalhost(b)&&(b="");c=a._fs_cookie_domain(c);"string"==typeof c&&(b=c);this._domain=b;this._cookie.UserId=e;this._cookie.SessionId=g;this.write()};d.prototype.clearAppId=function(){if(!this._cookie.AppKey)return!1;
this._cookie.AppKey="";this.write();return!0};d.prototype.setAppId=function(c){"number"==typeof c&&c===c>>0&&(c=""+c);if("string"!=typeof c)return a.logIfDebug("blocking FS.identify API call; uid value ("+c+") must be a string"),[!1,a.HighlightTypeFsId];var b=c.trim();if(0<=a.BAD_APP_IDS.indexOf(b.toLowerCase()))return a.logIfDebug("blocking FS.identify API call; uid value ("+c+") is illegal"),[!1,a.HighlightTypeFsId];c=void 0;this._cookie.AppKey&&this._cookie.AppKey!=b&&(a.logIfDebug("user re-identified; existing uid ("+
this._cookie.AppKey+") does not match provided uid ("+b+")"),c=a.HighlightTypeNewUid);this._cookie.AppKey=b;this.write();return[!0,c]};d.prototype.encode=function(){var a=this._cookie.Host+"`"+this._cookie.OrgId+"`"+this._cookie.UserId+":"+this._cookie.SessionId;this._cookie.AppKey&&(a+="`"+encodeURIComponent(this._cookie.AppKey)+"`");return a};d.prototype.write=function(){null!=this._domain&&this.setCookie(a.UID_COOKIE,this.encode())};return d}();a.Identity=h})(l||(l={}));(function(a){var h=function(){function d(a){this._identity=
a;this.AccountSystemVars={acctId:"str",displayName:"str",website:"str"};this.UserSystemVars={uid:"str",displayName:"str",email:"str"};this.VarTypes={str:function(a){return"string"==typeof a},bool:function(a){return"boolean"==typeof a},"int":function(a){return"number"==typeof a&&0==a-Math.floor(a)},real:function(a){return"number"==typeof a},date:function(a){return a?!isNaN(a.constructor===Date?a:new Date(a)):!1}}}d.prototype.identity=function(){return this._identity};d.prototype.api=function(c,b){var e=
!1,g=[];switch(c){case "account":g=g.concat(this.setvar_api("acct",this.AccountSystemVars,b));break;case "user":if("uid"in b){var f=b.uid;if(!1===f)this._identity.clearAppId()&&(e=!0),delete b.uid;else{var f=this._identity.setAppId(f),m=f[1];if(!f[0]){switch(m){case a.HighlightTypeFsId:g.push({When:0,Kind:a.EVENT_SYS_HIGHLIGHT,Args:[a.HighlightTypeFsId,b.uid+""]});break;case void 0:break;default:a.logIfDebug("unexpected failReason returned from setAppId: "+m)}return[g,!1]}m==a.HighlightTypeNewUid&&
(e=!0)}}g=g.concat(this.setvar_api("user",this.UserSystemVars,b));break;default:a.logIfDebug('invalid operation "'+c+'"; only "account" and "user" are supported at present')}return[g,e]};d.prototype.setvar_api=function(c,b,e){var g=[],f={},m;for(m in e)if(e.hasOwnProperty(m)){var d=e[m];a.logIfDebug("set-var('"+c+"'): \""+m+'" = '+a.stringify(d));var k=typeof d;if("object"!==k||d&&d.constructor==Date){var n,h;if(m in b)n=m,h=b[m];else{h=m.split("_");if(2!=h.length){a.logIfDebug('variables must be of the form "name_type", where "type" is one of [str, bool, int, real, date]');
g.push({When:0,Kind:a.EVENT_SYS_HIGHLIGHT,Args:["varname",c+":"+m]});continue}-1!=m.indexOf(" ")?(n=m.replace(/ /g,""),g.push({When:0,Kind:a.EVENT_SYS_HIGHLIGHT,Args:["varname",c+":"+m]}),a.logIfDebug("Warning: variable '"+m+"' has spaces in it, which is disallowed. Converted name to '"+n+"'.")):n=m;h=h[1]}h in this.VarTypes?this.VarTypes[h](d)?("str"==h&&(d=d.trim()),"date"==h&&(d=this.toIsoString(d)),f[n]=d):(a.logIfDebug("illegal value "+a.stringify(d)+" for type "+h),"number"===k?k=0==d-Math.floor(d)?
"integer":"real":"object"==k&&(null!=d&&d.constructor==Date)&&(k=isNaN(d)?"invalid date":"date"),g.push({When:0,Kind:a.EVENT_SYS_HIGHLIGHT,Args:["vartype",c+":"+m,k]})):(a.logIfDebug('invalid type "'+h+'"'),g.push({When:0,Kind:a.EVENT_SYS_HIGHLIGHT,Args:["varname",c+":"+m]}))}else d instanceof Array&&(k="array"),g.push({When:0,Kind:a.EVENT_SYS_HIGHLIGHT,Args:["vartype",c+":"+m,k+" (unsupported)"]})}g.push({When:0,Kind:a.EVENT_SYS_SETVAR,Args:[c,a.stringify(f)]});return g};d.prototype.toIsoString=
function(a){return(a.constructor===Date?a:new Date(a)).toISOString()};return d}();a.Vars=h})(l||(l={}));var A;(function(a){var h=/(?:[^\\](?:\\\\)*)/.source;a.CSS_URL=RegExp('url\\(\\s*"(.*?'+h+")\"\\s*\\)|url\\(\\s*'(.*?"+h+")'\\s*\\)|url\\((.*?"+h+")\\)","g");a.QUOTES=/\"|'/g;a.HOVER=/\:hover/g;a.FOCUS=/\:focus/g;a.MEDIA_QUERY=/(@media.*?{)/g;a.DOMAIN=/^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9]\.[a-zA-Z]{2,}$/;a.DOMAIN_PART=/^[a-zA-Z0-9-:]{1,61}$/;a.IPv4_PART=/^[0-9]{1,3}$/;a.IPv6_PART=/^[0-9a-f]{0,4}$/;
a.PLAYBACK_URL_PARAMS=/.*\?Base=(.*)&Url=(.*)/;a.EMAIL=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;a.IMAGE_FILENAME=/\.(jpe?g|png|svg|gif|bmp)$/;a.ATTR_SELECTOR=/\[.*\]/g;a.SVG_NS=/svg\:/g})(A||(A={}));(function(a){var h=function(){function a(b,c){this.parent=b;this.combinator=c;this.classes={};this.attrs={};this.attrMatch={}}a.prototype.cssEscapeIdent=function(a){var c=function(a){return-1!=
"[]:./\\()@#%^&*'\" ".indexOf(a)?"\\"+a:"\\"+a.charCodeAt(0).toString(16)+" "};return"-"==a?"\\-":"-"==a[0]?"-"+a.slice(1).replace(/([^0-9a-zA-Z-_])/g,c):a.replace(/[^0-9a-zA-Z-_:]/g,c)};a.prototype.cssEscapeString=function(a){return'"'+a.replace(/[\x01-\x1f\"\\]/g,function(a){return'"'==a||"\\"==a?"\\"+a:"\\"+a.charCodeAt(0).toString(16)+" "})+'"'};a.prototype.serialize=function(){var a=this.combinator?this.combinator:"";this.tag&&(a+="*"==this.tag?this.tag:this.cssEscapeIdent(this.tag));this.id&&
(a+="#"+this.cssEscapeIdent(this.id));var c=Object.keys(this.classes);c.sort();for(var g=0;g<c.length;g++)a+="."+this.cssEscapeIdent(c[g]);for(var f in this.attrs)a=""==this.attrMatch[f]?a+("["+this.cssEscapeIdent(f)+"]"):a+("["+this.cssEscapeIdent(f)+this.attrMatch[f]+this.cssEscapeString(this.attrs[f])+"]");return a};return a}();a.SelectorRule=h;var d=function(){function a(b){this.rules=b}a.parse=function(b,e,g){void 0===e&&(e=null);b=b.trim();var f=new h(null,null),m=0,d=!1,k=function(){throw"Invalid selector";
},n=function(){p=b[++m];if("\n"==p||null==p)throw k();if(p.match(/[0-9a-fA-F]/)){var a="";do a+=p,p=b[++m];while(p&&p.match(/[0-9a-fA-F]/));p&&p.match(/[\s]/)&&m++;return String.fromCharCode(parseInt(a,16))}m++;return p},q=function(a){for(var c=m,f="",e;null!=(e=b[m]);)if("\\"==e)f+=n();else if(e.match(a?/[a-zA-Z0-9_:\-]/:/[a-zA-Z0-9_\-]/)||128<e.charCodeAt(0))f+=e,m++;else break;if(c==m)throw k();return f},l=function(){for(;null!=b[m]&&b[m].match(/\s/);)m++},s=function(){d=!0;m++;var a=q().toLowerCase();
try{var c;l();var g=b[m],h="=";if("*"==g||"|"==g||"^"==g||"$"==g||"~"==g)h=g+"=",m++;if(e&&!e[h])throw k();if("="!=b[m])throw k();m++;l();c=h}catch(s){if(e&&!e["[]"]||"Invalid selector"!=s)throw s;if("]"!=b[m])throw k();m++;f.attrs[a]=f.attrMatch[a]="";return}p=b[m];'"'==p||"'"==p?(g=p,m++):g="]";for(h="";(p=b[m])!=g;){if(null==p)throw k();if("\\"==p)h+=n();else{if("]"==g&&('"'==p||"'"==p))throw k();h+=p;m++}}m++;"]"!=g&&"]"==b[m]&&m++;f.attrs[a]=h;f.attrMatch[a]=c},v=function(){if(!d)throw k();d=
!1;l();var a=b[m];">"==a||"+"==a||"~"==a?(m++,l()):a=" ";f=new h(f,a);if(e&&!e[a])throw k();};if(0==b.indexOf("//"))throw k();for(var u=0,m=0;m<b.length;){if(u++>2*b.length)throw console.log("Likely caught in an infinite loop while parsing "+b),"Internal error, infinite loop";var p=b[m];switch(p){case "#":d=!0;m++;f.id=q();break;case "*":if(d)throw k();d=!0;f.tag="*";if(e&&!e["*"])throw k();m++;break;case ".":d=!0;m++;f.classes[q()]=!0;break;case "[":s();break;case " ":case ">":case "+":case "~":v();
break;case ":":throw k();default:if(d)throw k();d=!0;f.tag=q(g).toLowerCase()}}if(!d)throw k();return new a(f)};a.prototype.serialize=function(){for(var a=null,c=this.rules;c;c=c.parent)a=a?c.serialize()+a:c.serialize();return a};return a}();a.Selector=d})(l||(l={}));(function(a){function h(a){var b={};if(!a)return b;if(a.classList)for(var c=0;c<a.classList.length;++c)b[a.classList[c]]=!0;else if(a.className)for(a=(a.getAttribute("class")||"").split(" "),c=0;c<a.length;++c)b[a[c].trim()]=!0;return b}
a.NYI_KIND="nyi";a.BLOCKED_KIND="blocked";a.HIDE_KIND="hide";var d=function(){function b(a,c){this._parent=a;this._rule=c}b.prototype.parent=function(){return this._parent};b.prototype.matches=function(c,f){if(!c||this._rule.tag&&a.tagName(c)!=this._rule.tag||this._rule.id&&c.id!=this._rule.id)return!1;for(var m in this._rule.classes)if(!(m in f))return!1;for(var d in this._rule.attrs)if(m=c.getAttribute(d),null==m||!b.attrPredicates[this._rule.attrMatch[d]](m,this._rule.attrs[d]))return!1;return this._parent?
this._parent.matches(c.parentElement,h(c.parentElement)):!0};b.attrPredicates={"":function(a,b){return!0},"=":function(a,b){return a==b},"*=":function(a,b){return-1<a.indexOf(b)},"^=":function(a,b){return 0==a.lastIndexOf(b,0)},"$=":function(a,b){return a.indexOf(b,a.length-b.length)+b.length==a.length},"~=":function(a,b){return-1<a.split(/\s+/).indexOf(b)},"|=":function(a,b){return-1<a.split("-").indexOf(b)}};return b}();a.BlockRuleElem=d;var c=function(){function b(c){this.kind=c.Kind;this.selector=
a.Selector.parse(c.Selector,{">":!0,"=":!0,"[]":!0,"*=":!0,"^=":!0,"$=":!0,"~=":!0,"|=":!0});var f=function(a){return new d(a.parent?f(a.parent):null,a)};this.rules=f(this.selector.rules)}b.isComment=function(a){return!!a.match(/^\s*\/\//)};b.prototype.serialize=function(){return this.selector.serialize()};return b}();a.BlockRule=c;var b=function(){function b(){this._rules=[];this._predicateRules=[];this.rawRules=[]}b.prototype.isBlocked=function(a){for(var b=0;b<this._predicateRules.length;++b)if(this._predicateRules[b].Selector(a))return this._predicateRules[b].Kind;
for(var c=h(a),b=0;b<this._rules.length;++b)if(this._rules[b].rules.matches(a,c))return this._rules[b].kind;return null};b.prototype.addRule=function(a){this._rules.push(new c(a));this.rawRules.push(a)};b.prototype.addPredicateRule=function(a){this._predicateRules.push(a)};b.prototype.mungeBlockedStyle=function(b,c){var m=b.getBoundingClientRect(),e=Math.floor(m.width),m=Math.floor(m.height);if("object"==a.tagName(b))for(var d=b.children,n=0;n<d.length;n++){var h=d[n];if("embed"==a.tagName(h)){d=
h.getBoundingClientRect();e=Math.max(e,Math.floor(d.width));m=Math.max(m,Math.floor(d.height));break}}d="";null!=c&&(d=c.trim());0<d.length&&";"!=d.charAt(d.length-1)&&(d+=";");if(0!=e||0!=m)d+="width:"+e+"px;height:"+m+"px;";return d};return b}();a.Blocker=b})(l||(l={}));(function(a){a.MutationProcessingInterval=250;a.CurveSamplingInterval=142;a.UploadInterval=5E3;a.UserInactivityTimeout=1E4;a.HeartbeatInitial=4E3;a.HeartbeatMax=256E3;a.PageInactivityTimeout=18E5;a.BackoffMax=3E5;a.ScrollSampleInterval=
a.MutationProcessingInterval/5;a.InactivityThreshold=4E3})(l||(l={}));(function(a){var h=function(){function a(b,c,g){this._ctx=b;this._q=c;this._valueIndices=g;this._evts=[]}a.prototype.add=function(a){0==this._evts.length&&this._q.push(a);this._evts.push(a)};a.prototype.finish=function(a,c){var g=this._evts.length;if(1>=g)return!1;for(var f=this._evts[0].When,m=this._evts[g-1].When,d=0;d<this._valueIndices.length;++d){var k=this._valueIndices[d],h=this._evts[0].Args[k],q=(this._evts[1].When-f)/
(m-f),l=(this._evts[1].Args[k]-h)/q,s=this._evts[g-1].Args[k],q=(m-this._evts[g-2].When)/(m-f);c.push(h,s,l,(s-this._evts[g-2].Args[k])/q)}this._evts[0].Kind=a;this._evts[0].Args=c;return!0};a.prototype.evts=function(){return this._evts};return a}(),d=function(){function c(a){this._ctx=a;this._gotInitialScroll=!1}c.prototype.processQueue=function(b){if(0==b.length)return b;this._ctx.maybeAddInitialScroll();for(var c=this._ctx.now(),g=[],f=new h(this._ctx,g,[0,1]),m={},d={},k,n=0;n<b.length;++n){var q=
b[n];switch(q.Kind){case a.EVENT_MOUSEMOVE:f.add(q);break;case a.EVENT_TOUCHMOVE:var l=q.Args[0];l in m||(m[l]=new h(this._ctx,g,[1,2]));m[l].add(q);break;case a.EVENT_SCROLL:l=q.Args[0];l in d||(d[l]=new h(this._ctx,g,[1,2]));d[l].add(q);break;case a.EVENT_INNERWIDTH:k||(k=new h(this._ctx,g,[0]));k.add(q);break;default:g.push(q)}}f.finish(a.EVENT_MOUSEMOVE_CURVE,[c])&&(b=f.evts(),f=b[b.length-1].Args,2<f.length&&f[2]&&b[0].Args.push(f[2]));for(l in d)b=parseInt(l),d[b].finish(a.EVENT_SCROLL_CURVE,
[c,b]);for(l in m)b=parseInt(l),m[b].finish(a.EVENT_TOUCHMOVE_CURVE,[c,b]);k&&k.finish(a.EVENT_INNERWIDTH_CURVE,[c]);return g};return c}();a.EventProcessor=d})(l||(l={}));(function(a){a.CompiledTimestamp=1502294157;a.CompiledVersion="UNSET"})(l||(l={}));(function(a){function h(){var f,m;try{throw Error("");}catch(g){f="<generated>\n",m=g.stack||g.backtrace||g.stacktrace}if(!m){f="<generated-ie>\n";m=[];try{for(var d=arguments.callee.caller.caller;d&&m.length<c;){var h=e.test(d.toString())?RegExp.$1||
b:b;m.push(h);d=d.caller}}catch(l){a.logIfDebug(l)}m=m.join("\n")}return f+m}function d(b,c){var e=window.location.origin,g=(new Date).getTime(),d;try{d=window.self!==window.top}catch(l){d=!0}var e={projectRoot:e,"metaData[device][time]":g,"metaData[misc][inIframe]":d,"metaData[misc][CompiledTimestamp]":a.CompiledTimestamp,"metaData[misc][CompiledTime]":(new Date(a.CompiledTimestamp)).toISOString(),"metaData[misc][orgId]":a._fs_org(window),context:document.location.pathname,message:b.message,name:"Recording Error",
payloadVersion:3,releaseStage:"production "+(new Date(a.CompiledTimestamp)).toISOString(),severity:c,notfierVersion:"3.2.0",language:navigator.language||navigator.userLanguage||"en-GB",stacktrace:b.stack||(b.backtrace||b.stacktrace)||h(),apiKey:"38f089fdedbe27e3ca594fb18cdbc78e",ct:"img",cb:(new Date).getTime()},g=[],r;for(r in e)g.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));(new Image).src="https://notify.bugsnag.com/js?"+g.sort().join("&")}var c=10,b="[anonymous]",e=/function\s*([\w\-$]+)?\s*\(/i;
a.generateStacktrace=h;a.sendToBugsnag=d;var g={};a.assert=function(a,b,c){void 0===c&&(c=1);a||(g[b]=g[b]||0,g[b]++,g[b]>c||d(Error("Assertion failed: "+b),"error"))}})(l||(l={}));(function(a){var h=function(){function d(){}d.prototype.post=function(c,b,e,g,f,m){b="//"+b+e;var d=!1,k=new XMLHttpRequest;if("withCredentials"in k)k.onreadystatechange=function(){if(k.readyState==a.XHR_DONE&&!d){d=!0;try{200==k.status?f(k.responseText):m&&m(k.status)}catch(b){a.sendToBugsnag(b,"error")}}},k.open("POST",
c+b,!0),k.withCredentials=!0,k.setRequestHeader("Content-Type","text/plain"),k.send(g);else{var h=new XDomainRequest;h.onload=function(){f(h.responseText)};h.onerror=function(){m&&m("Not Found"==h.responseText?404:500)};h.onprogress=function(){};h.open("POST",b);h.send(g)}};d.prototype.sendBeacon=function(a,b,e,g){return"function"==typeof navigator.sendBeacon?(navigator.sendBeacon(a+"//"+b+e,g),!0):!1};d.prototype.exponentialBackoffMs=function(c,b){return a.exponentialBackoffMs(c,b)};return d}();
a.XHRPoster=h})(l||(l={}));(function(a){function h(b,c){return a.stringify({__fs:[b,c?c:""]})}function d(b){return a.isLocalhost(a.domainFromHost(b))?b:0==b.indexOf("www.")||0==b.indexOf("app.")?"r."+b.slice(4):"r."+b}function c(a){return 400<=a||202==a||206==a?!0:!1}function b(a,b,c,e,g,d,h){a="/rec/bundle?OrgId="+a+"&UserId="+b+"&SessionId="+c+"&PageId="+e+"&Seq="+g.Seq;d&&(a+="&PageStartTime="+d);h&&(a+="&DeltaT="+h);return a}var e=function(){function b(a,c){void 0===c&&(c=new g);this._wnd=a;this._messagePoster=
c}b.prototype.enqueueEvents=function(b){this._messagePoster.postMessage(this._wnd.parent,a.FS_IFRAME_EVENTS,b)};b.prototype.startPipeline=function(a){};b.prototype.stopPipeline=function(){};b.prototype.flush=function(){};b.prototype.singSwanSong=function(){};return b}();a.PostMessageEventTransport=e;var g=function(){function b(){}b.prototype.postMessage=function(b,c,f){var e;try{e=a._fs_transport(b)}catch(g){}e?e.send(c,a.stringify(f)):b.postMessage(h(c,f),"*")};return b}();a.PostMessagePoster=g;
a.formatPostMessageData=h;a.bundleHost=d;e=function(){function f(b,c,f,e,g){void 0===f&&(f=a.RealTicker);void 0===e&&(e=a.RealTimeout);void 0===g&&(g=new a.XHRPoster);this._ctx=b;this._onShutdown=c;this._tickerFactory=f;this._timeoutFactory=e;this._poster=g;this._backoffTime=this._backoffRetries=this._byteCount=0;this._bundleSeq=1;this._lastPostTime=0;this._largeBundleSize=2E6;this._largePageSize=16E6;this._outgoingEventQueue=[];this._bundleQueue=[];this._bundleHost=d(b.getHost());this._protocol=
b.getProtocol();this._identity=b.getIdentity();this._lastBundleTime=b.wallTime();this._uploadTicker=new this._tickerFactory(a.UploadInterval);this._swanSong=new a.SwanSong(b,this,e)}f.prototype.protocol=function(){return this._protocol};f.prototype.enqueueEvents=function(a){this._outgoingEventQueue=this._outgoingEventQueue.concat(a)};f.prototype.startPipeline=function(a){var b=this;this._pageId=a;this.enqueueAndSendBundle();this._uploadTicker.start(function(){b.enqueueAndSendBundle()})};f.prototype.stopPipeline=
function(){this._uploadTicker.stop();this._outgoingEventQueue=[];this._bundleQueue=[]};f.prototype.flush=function(){this.maybeSendNextBundle()};f.prototype.singSwanSong=function(){0<this._outgoingEventQueue.length&&this.enqueueNextBundle(!0);if(0<this._bundleQueue.length||this._pendingBundle){var a=this._bundleQueue.concat();this._pendingBundle&&a.unshift(this._pendingBundle);this._swanSong.sing(this._pageId,a,this._lastBundleTime)}};f.prototype.sendSwanSongBundle=function(a,c,f,e,g,d,h,l,u){a=b(a,
c,f,e,g,d,h);this.post(a,g,l,u)};f.prototype.enqueueAndSendBundle=function(){this._pendingBundle?this._pendingBundleFailed&&this._sendPendingBundle():0==this._outgoingEventQueue.length?this.maybeSendNextBundle():this.enqueueNextBundle()};f.prototype.enqueueNextBundle=function(b){void 0===b&&(b=!1);var c={When:this._outgoingEventQueue[0].When,Seq:this._bundleSeq++,Evts:this._outgoingEventQueue};this._outgoingEventQueue=[];this._bundleQueue.push(c);b&&this._poster.sendBeacon(this._protocol,this._bundleHost,
this.bundleUrl(c),a.stringify(c))||this.maybeSendNextBundle()};f.prototype.maybeSendNextBundle=function(){this._pageId&&(!this._pendingBundle&&0!=this._bundleQueue.length)&&(this._pendingBundle=this._bundleQueue.shift(),this._sendPendingBundle())};f.prototype._sendPendingBundle=function(){var b=this,f=this._ctx.wallTime();if(!(f<this._backoffTime)){var e=this._pendingBundle;e&&(this._pendingBundleFailed=!1,this._lastPostTime=this._lastBundleTime=f,this.sendBundle(e,function(c){e&&a.logIfDebug("Sent bundle "+
e.Seq+" with "+e.Evts.length+" events");b._pendingBundle=null;b._backoffTime=0;b._backoffRetries=0;b._ctx.wallTime()-b._lastPostTime>a.UploadInterval&&b.maybeSendNextBundle()},function(f){a.logIfDebug("Failed to send events.");c(f)?b._onShutdown():(b._pendingBundleFailed=!0,b._backoffTime=b._lastPostTime+b._poster.exponentialBackoffMs(b._backoffRetries++,!1))}))}};f.prototype.sendBundle=function(a,b,c){this.post(this.bundleUrl(a),a,b,c)};f.prototype.bundleUrl=function(a){return b(this._identity.orgId(),
this._identity.userId(),this._identity.sessionId(),this._pageId,a)};f.prototype.post=function(b,c,f,e){var g="";null!=c&&(g=a.stringify(c),this._byteCount+=g.length,a.assert(g.length<this._largeBundleSize,"Large bundle of "+g.length+" bytes was sent to: "+b),a.logIfDebug("total bytes written: "+this._byteCount));this._poster.post(this._protocol,this._bundleHost,b,g,f,e);this._byteCount>this._largePageSize&&(a.logIfDebug("Splitting large page of size: "+this._byteCount.toString()),this._ctx.splitPage(),
this._byteCount=0)};return f}();a.HttpEventTransport=e;a.exponentialBackoffMs=function(b,c){var e=Math.min(a.BackoffMax,5E3*Math.pow(2,b));return c?e+0.25*Math.random()*e:e};a.isErrorFatal=c})(l||(l={}));(function(a){var h=function(){function a(){this.dict={idx:-1,map:{}};this.nodeCount=1;this.startIdx=0}a.prototype.encode=function(c){function b(){f?1<k?m.push([f.idx,k]):m.push(f.idx):m.push(e)}if(0==c.length)return[];var e=c[0],g,f=Object.prototype.hasOwnProperty.call(this.dict.map,e)?this.dict.map[e]:
null,m=[],h,k=1;for(g=1;g<c.length;g++)if(h=c[g],f&&Object.prototype.hasOwnProperty.call(f.map,h))k++,e=h,f=f.map[h];else{b();var n=this.startIdx+g-k;null==f&&this.nodeCount<a.MAX_NODES&&(f={idx:n,map:{}},this.dict.map[e]=f,this.nodeCount++);f&&this.nodeCount<a.MAX_NODES&&(f.map[h]={idx:n,map:{}},this.nodeCount++);k=1;e=h;f=Object.prototype.hasOwnProperty.call(this.dict.map,h)?this.dict.map[h]:null}b();this.startIdx+=c.length;return m};a.MAX_NODES=1E4;return a}();a.LZJGWEncoder=h;h=function(){function a(){this._seq=
[]}a.prototype.sequence=function(){return this._seq};a.prototype.decode=function(a){for(var b=this._seq.length,e=0;e<a.length;++e){var g=a[e];switch(typeof g){case "string":this._seq.push(g);break;case "number":this._seq.push(this._seq[g]);break;case "object":if(null==g){this._seq.push("");break}for(var f=0;f<g[1];f++)this._seq.push(this._seq[g[0]+f])}}return b};return a}();a.LZJGWDecoder=h})(l||(l={}));(function(a){var h=function(){function d(c,b,e){void 0===e&&(e=a.RealTimeout);this._ctx=c;this._transport=
b;this._timeoutFactory=e;this._recover();this._identity=c.getIdentity()}d.prototype.sing=function(c,b,e){a.logIfDebug("Saving "+b.length+" bundles in swan-song.");c={OrgId:this._identity.orgId(),UserId:this._identity.userId(),SessionId:this._identity.sessionId(),PageId:c,Bundles:b,PageStartTime:this._ctx.startTime(),LastBundleTime:e};try{localStorage.singSwanSong=a.stringify(c)}catch(g){}};d.prototype._recover=function(){try{if("singSwanSong"in localStorage){var c=localStorage.singSwanSong;delete localStorage.singSwanSong;
var b=a.parseJson(c);b.Bundles&&b.UserId&&b.SessionId&&b.PageId?(b.OrgId||(b.OrgId=this._identity.orgId()),0<b.Bundles.length&&(a.logIfDebug("Sending "+b.Bundles.length+" bundles as prior page swan song"),this.sendSwanSongBundles(b.OrgId,b.UserId,b.SessionId,b.PageId,b.PageStartTime,b.Bundles,b.LastBundleTime))):a.logIfDebug("Malformed swan song found. Ignoring it.")}}catch(e){a.logIfDebug("Error recovering swan-song: "+e)}};d.prototype.sendSwanSongBundles=function(c,b,e,g,f,d,h,k){var n=this;void 0===
k&&(k=0);var l=null;a.isArray(d)&&(0!==d.length&&void 0!==d[0])&&(1==d.length&&(l=this._ctx.wallTime()-(h||0)),this._transport.sendSwanSongBundle(c,b,e,g,d[0],f,l,function(k){a.logIfDebug("Sent "+d[0].Evts.length+" trailing events from last session as Seq "+d[0].Seq);a.windex.Array.prototype.shift.call(d);0<d.length?n.sendSwanSongBundles(c,b,e,g,f,d,h):a.logIfDebug("Done with prior page swan song")},function(l){a.isErrorFatal(l)?a.logIfDebug("Fatal error while sending events, giving up"):(a.logIfDebug("Failed to send events from last session, will retry while on this page"),
n._lastSwanSongRetryTimeout=new n._timeoutFactory(n.sendSwanSongBundles,a.exponentialBackoffMs(k,!0),n,c,b,e,g,f,d,h,k+1))}))};return d}();a.SwanSong=h})(l||(l={}));(function(a){var h=function(){function a(c){this._interval=c;this._handle=-1}a.prototype.start=function(a){-1==this._handle&&(this._handle=setInterval(a,this._interval))};a.prototype.stop=function(){-1!=this._handle&&(clearInterval(this._handle),this._handle=-1)};return a}();a.RealTicker=h;h=function(){function d(c,b,e){void 0===b&&(b=
0);for(var g=[],f=3;f<arguments.length;f++)g[f-3]=arguments[f];this.delay=b;this.timer=-1;this.handler=a.bind.apply(void 0,[c,void 0===e?window:e].concat(g));this.timer=setTimeout(this.handler,b);this.args=g}d.prototype.cancel=function(){clearTimeout(this.timer);this.timer=-1};d.prototype.reset=function(a){void 0===a&&(a=this.delay);this.delay=a;clearTimeout(this.timer);this.timer=setTimeout(this.handler,this.delay)};return d}();a.RealTimeout=h})(l||(l={}));(function(a){var h=function(){function d(c,
b,e,g,f){void 0===e&&(e=function(){return[]});void 0===g&&(g=a.RealTicker);void 0===f&&(f=a.RealTimeout);var d=this;this._ctx=c;this._transport=b;this._gatherExternalEvents=e;this._tickerFactory=g;this._timeoutFactory=f;this._recordingDisabled=!1;this._lastWhen=-1;this._lastUserAction=0;this._hibernating=this._quiescent=!1;this._lastHeartbeat=0;this._heartbeatInterval=a.HeartbeatInitial;this._gotUnload=!1;this._eventQueue=[];this._sampleCurvesTicker=new this._tickerFactory(a.CurveSamplingInterval);
this._processMutationsTicker=new this._tickerFactory(a.MutationProcessingInterval);this._hibernationTimeout=new this._timeoutFactory(function(){d.hibernate()},a.PageInactivityTimeout,this);this._processor=new a.EventProcessor(c)}d.prototype.startPipeline=function(a,b,e){var g=this;void 0===b&&(b=0);void 0===e&&(e=[]);this._recordingDisabled||this._pipelineStarted||(this._pipelineStarted=!0,this._frameId=b,this._parentIds=e,this._lastUserAction=this._ctx.now(),this.processEvents(),this._processMutationsTicker.start(function(){g.processEvents()}),
this._sampleCurvesTicker.start(function(){g.processEvents(!0)}),this._transport.startPipeline(a))};d.prototype.enqueue=function(a,b){this.enqueueAt(this._ctx.now(),a,b)};d.prototype.enqueueAt=function(c,b,e){this._hibernating&&a.isUserActionEvent(b)?this._ctx.splitPage():this._recordingDisabled||(c<=this._lastWhen&&(c=this._lastWhen+1),this._lastWhen=c,this._eventQueue.push({When:c,Kind:b,Args:e}),a.isUserActionEvent(b)&&(this._lastUserAction=c,this._hibernationTimeout.reset()))};d.prototype.hibernate=
function(){this.shutdown();this._hibernating=!0};d.prototype.enqueueFirst=function(a,b){0<this._eventQueue.length?this._eventQueue.unshift({When:this._eventQueue[0].When,Kind:a,Args:b}):this.enqueue(a,b)};d.prototype.addUnload=function(){this._gotUnload||(this._gotUnload=!0,this.enqueue(a.EVENT_UNLOAD,[]),this._lastUserAction=this._ctx.now(),this.singSwanSong())};d.prototype.shutdown=function(){this._flush();this.addUnload();this._flush();this._recordingDisabled=!0;this.stopPipeline();this._hibernationTimeout.cancel()};
d.prototype._flush=function(){this.processEvents();this._transport.flush()};d.prototype.prequeue=function(a,b){this._recordingDisabled||this._eventQueue.unshift({When:0,Kind:a,Args:b})};d.prototype.appendToQueue=function(a){this._eventQueue=this._eventQueue.concat(a)};d.prototype.singSwanSong=function(){this._recordingDisabled||(this.processEvents(),this._transport.singSwanSong())};d.prototype.rebaseIframe=function(a){for(var b=0,e=this._eventQueue.length;b<e;b++){var g=this._eventQueue[b],f=g.When+
this._ctx.startTime()-a;0>f&&(f=0);g.When=f}};d.prototype.processEvents=function(c){if(this._pipelineStarted&&!this._hibernating&&(this._ctx.now()-this._lastUserAction>a.UserInactivityTimeout?this._quiescent||(this._quiescent=!0,this._heartbeatInterval=a.HeartbeatInitial,this._lastHeartbeat=this._ctx.now()):this._quiescent=!1,!this._quiescent||this.maybeSendHeartbeat())){var b=this._eventQueue;this._eventQueue=[];b=this._processor.processQueue(b);c||(b=b.concat(this._gatherExternalEvents()));this.ensureFrameIds(b);
0!=b.length&&this._transport.enqueueEvents(b)}};d.prototype.maybeSendHeartbeat=function(){var c=this._ctx.now();return c-this._lastHeartbeat>=this._heartbeatInterval?(this._lastHeartbeat=c,this._heartbeatInterval*=2,this._heartbeatInterval>a.HeartbeatMax&&(this._heartbeatInterval=a.HeartbeatMax),this.enqueue(a.EVENT_HEARTBEAT,[]),!0):!1};d.prototype.ensureFrameIds=function(a){if(this._frameId)for(var b=this._parentIds,e=b&&0<b.length,g=0;g<a.length;++g){var f=a[g];f.FId||(f.FId=this._frameId);e&&
!f.PIds&&(f.PIds=b)}};d.prototype.stopPipeline=function(){this._pipelineStarted&&(this._sampleCurvesTicker.stop(),this._processMutationsTicker.stop(),this._eventQueue=[],this._transport.stopPipeline())};return d}();a.EventQueue=h})(l||(l={}));(function(a){var h=function(){function d(a,b){this._queue=a;this._wnd=b;this._overflow=this._enabled=!1;this._total=0}d.prototype.enable=function(){var c=this;c._enabled||(c._enabled=!0,this._wnd.console?(console.log&&console.log.apply&&(c._oldLog=console.log,
console.log=a.$entry(function(){c.addLog("log",arguments);return c._oldLog.apply(this,arguments)})),console.info&&console.info.apply&&(c._oldInfo=console.info,console.info=a.$entry(function(){c.addLog("info",arguments);return c._oldInfo.apply(this,arguments)})),console.warn&&console.warn.apply&&(c._oldWarn=console.warn,console.warn=a.$entry(function(){c.addLog("warn",arguments);return c._oldWarn.apply(this,arguments)})),console.error&&console.error.apply&&(c._oldError=console.error,console.error=
a.$entry(function(){c.addLog("error",arguments);return c._oldError.apply(this,arguments)}))):c.addLog("log",["NOTE: Log messages cannot be captured on IE9"]),c._oldOnError=this._wnd.onerror,this._wnd.onerror=function(a,e,g){c.addError(a,e,g);if(c._oldOnError)return c._oldOnError.apply(this,arguments)})};d.prototype.disable=function(){this._enabled&&(this._enabled=!1,this._oldLog&&(console.log=this._oldLog),this._oldInfo&&(console.info=this._oldInfo),this._oldWarn&&(console.warn=this._oldWarn),this._oldError&&
(console.error=this._oldError),this._wnd.onerror=this._oldOnError)};d.prototype.addLog=function(c,b){if(this.checkOverflow()){for(var e=[c],g=0;g<b.length;++g)e.push(a.stringify(b[g],1E3));this._queue.enqueue(a.EVENT_LOG,e)}};d.prototype.addError=function(c,b,e){this.checkOverflow()&&("object"==typeof c&&(c=a.stringify(c,1E3)),"object"==typeof b&&(b=a.stringify(b,100)),"object"==typeof e&&(e=-1),this._queue.enqueue(a.EVENT_ERROR,[c,b,e]))};d.prototype.checkOverflow=function(){if(this._overflow)return!1;
if(this._total==a.MAX_LOGS_PER_PAGE)return this._queue.enqueue(a.EVENT_LOG,["warn",d.OVERFLOW_MSG]),this._overflow=!0,!1;this._total++;return!0};d.OVERFLOW_MSG='"[received more than '+a.MAX_LOGS_PER_PAGE+' messages; no longer recording console]"';return d}();a.ConsoleWatcher=h})(l||(l={}));(function(a){function h(b,c){var d=Object.getOwnPropertyDescriptor(b.prototype,c);d&&Object.defineProperty(b.prototype,c,{set:function(b){var c=this,f=a.fsid(c);f&&(e&&e.values[f]!=b)&&setTimeout(function(){if(e)e.onChange(c,
b)},0);return d.set.call(this,b)},get:function(){return d.get&&d.get.call(this)}})}function d(a){switch(a.type){case "checkbox":case "radio":return""+a.checked;default:return(a=a.value)||(a=""),""+a}}var c=function(){function c(a,b){this._onchange=a;this._checkElem=b;this._fallback=!1;this._elems={};this.values={};e=this}c.prototype.hookEvents=function(){var a;(a=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"))&&a.set?(b||(h(HTMLInputElement,"value"),h(HTMLInputElement,"checked"),
h(HTMLSelectElement,"value"),h(HTMLTextAreaElement,"value"),b=!0),a=!0):a=!1;a||(this._fallback=!0)};c.prototype.addInput=function(b){var c=a.fsid(b);this._elems[c]=b;this.values[c]=d(b);a:switch(b.type){case "checkbox":case "radio":c=b.checked!=b.hasAttribute("checked");break a;default:var c=b.value||"",e=b.getAttribute("value")||"",c=c!=e}c&&this._onchange(b)};c.prototype.onChange=function(b,c){void 0===c&&(c=d(b));var e=a.fsid(b);(b=this._elems[e])&&c!=this.values[e]&&(this._onchange(b),this.values[e]=
c)};c.prototype.tick=function(){for(var a in this._elems)if(!this._checkElem(this._elems[a]))delete this._elems[a],delete this.values[a];else if(this._fallback){var b=this._elems[a],c=d(b);c!=this.values[a]&&(this._onchange(b),this.values[a]=c)}};c.prototype.shutdown=function(){e=null};c.prototype._usingFallback=function(){return this._fallback};c.prototype._trackingElem=function(a){return!!this._elems[a]};return c}();a.InputWatcher=c;var b=!1,e;a.valueOfInputishElem=d})(l||(l={}));(function(a){a.Node_ELEMENT_NODE=
1;a.Node_ATTRIBUTE_NODE=2;a.Node_TEXT_NODE=3;a.Node_CDATA_SECTION_NODE=4;a.Node_ENTITY_REFERENCE_NODE=5;a.Node_ENTITY_NODE=6;a.Node_PROCESSING_INSTRUCTION_NODE=7;a.Node_COMMENT_NODE=8;a.Node_DOCUMENT_NODE=9;a.Node_DOCUMENT_TYPE_NODE=10;a.Node_DOCUMENT_FRAGMENT_NODE=11;a.Node_NOTATION_NODE=12;a.XHR_UNSENT=0;a.XHR_OPENED=1;a.XHR_HEADERS_RECEIVED=2;a.XHR_LOADING=3;a.XHR_DONE=4})(l||(l={}));(function(a){function h(a){return"_fsblocked"in a}function d(a){return a._fsblocked}function c(a,b){a._fsblocked=
b}function b(b,c){if(h(b.node))for(var e=b,f=b.parent;f;f=f.parent){f.blockedChildSet=f.blockedChildSet||{};if(e.blockedChildSet)for(var g in e.blockedChildSet)delete f.blockedChildSet[g];f.blockedChildSet[e.id]=e;if(a.hasNKeys(f.blockedChildSet,2))e=f;else if(a.hasMoreThanNKeys(f.blockedChildSet,2))break}}function e(a){return a?q[a._fs]:null}function g(a){return a&&a._fs||0}function f(a,b,c){m(b);c=c||a.lastChild;b.parent=a;if(b.prev=c)e=[b,c.next],c.next=e[0],b.next=e[1];null==b.prev?a.child=b:
b.prev.next=b;null==b.next?a.lastChild=b:b.next.prev=b;var e}function m(b){if(b.parent){if(a.hasMoreThanNKeys(b.blockedChildSet,0)||h(b.node))for(var c=a.firstKey(b.blockedChildSet)||b.id,e=c?b.parent:null;e&&e.blockedChildSet&&e.blockedChildSet[c];){delete e.blockedChildSet[c];if(a.hasNKeys(e.blockedChildSet,1)){for(var c=e.id,f=a.firstValue(e.blockedChildSet),e=e.parent;e&&e.blockedChildSet&&e.blockedChildSet[c];)delete e.blockedChildSet[c],e.blockedChildSet[f.id]=f,e=e.parent;break}e=e.parent}b.parent.child==
b&&(b.parent.child=b.next);b.parent.lastChild==b&&(b.parent.lastChild=b.prev);b.prev&&(b.prev.next=b.next);b.next&&(b.next.prev=b.prev);b.parent=b.prev=b.next=null;q[b.id]=null;b.node._fs==b.id&&(b.node._fs=0);b.id=0;b.child&&l(b.child)}}function l(b){for(b=[b];0<b.length&&1E4>b.length;){var c=b.pop();c.node._fs=c.id=0;c.next&&b.push(c.next);c.child&&b.push(c.child)}a.assert(1E4>b.length,"clearIds is fast")}function k(a,b){if(a.attributes&&0<a.attributes.length)for(var c=0;c<a.attributes.length;c++){var e=
a.attributes[c];b(e.name.toLowerCase(),e.value)}}function n(a,b,c,e){if("class"==b&&0>c.indexOf("_fs_block_"))c+=" _fs_block_"+d(a);else if("type"==b||"value"==b||"checked"==b||"src"==b||"data"==b||"alt"==b)return null;return c}a.isBlocked=h;a.blockKind=d;a.setBlocked=c;var q={};a.mirrorFor=e;a.fsid=g;a.fsidIfNotBlocked=function(a){return h(a)?0:g(a)};a.removeMirror=m;a.clearIds=l;var r=function(){function g(a){this._blocker=a;this._curId=1}g.prototype.curId=function(){return this._curId};g.prototype.tokenizeNode=
function(a,b,c,f){var g=this._curId;try{var d=e(a),m=e(b);a=[];this.tokeNode(d,m,c,a,f);return a}catch(k){return this._curId=g,[]}};g.prototype.tokeNode=function(c,e,g,d,m){if("SCRIPT"==g.nodeName||g.nodeType==a.Node_COMMENT_NODE)return null;var h={id:this._curId++,node:g};q[h.id]=h;g._fs=h.id;c&&f(c,h,e);if(g.nodeType==a.Node_DOCUMENT_TYPE_NODE)return d.push("<!DOCTYPE",":name",g.name,":publicId",g.publicId||"",":systemId",g.systemId||""),h;c=g.nodeName;"http://www.w3.org/2000/svg"==g.namespaceURI&&
(c="svg:"+c);d.push("<"+c);try{var x=this.processBlockedElem(g,d);if(x)return b(h,x),h;m&&m(g);k(g,function(a,b){d.push(":"+a);d.push(b)});if(g.firstChild){d.push("[");var x=null,l;for(l=g.firstChild;l;l=l.nextSibling){var n=this.tokeNode(h,x,l,d,m);n&&(x=n)}d.push("]")}g.nodeType==a.Node_TEXT_NODE&&d.push(g.textContent||"")}catch(z){}return h};g.prototype.processBlockedElem=function(b,e){var f=this;if(b.nodeType==a.Node_ELEMENT_NODE&&this._blocker){var g=this._blocker.isBlocked(b);if(g){c(b,g);var d,
m=!1;k(b,function(a,c){var g=n(b,a,c,f._blocker);"class"==a?d=!0:"style"==a&&(m=!0);null!=g&&(e.push(":"+a),e.push(g))});d||(e.push(":class"),e.push("_fs_block_"+g));m||(e.push(":style"),e.push(this._blocker.mungeBlockedStyle(b,"")));return g}}return null};return g}();a.NodeEncoder=r;a.rewriteBlockedAttribute=n})(l||(l={}));(function(a){function h(){s=!1;var a=v;v=[];a.sort(function(a,b){return a.uid_-b.uid_});var b=!1;a.forEach(function(a){var c=a.takeRecords();d(a);c.length&&(a.callback_(c,a),b=
!0)});b&&h()}function d(a){a.nodes_.forEach(function(b){(b=k.get(b))&&b.forEach(function(b){b.observer===a&&b.removeTransientObservers()})})}function c(a,b){for(var c=a;c;c=c.parentNode){var e=k.get(c);if(e)for(var f=0;f<e.length;f++){var g=e[f],d=g.options;(c===a||d.subtree)&&(d=b(d))&&g.enqueue(d)}}}function b(a){this.callback_=a;this.nodes_=[];this.records_=[];this.uid_=++u}function e(a){if(t)return t;var b=y,c=new p(b.type,b.target);c.addedNodes=b.addedNodes.slice();c.removedNodes=b.removedNodes.slice();
c.previousSibling=b.previousSibling;c.nextSibling=b.nextSibling;c.attributeName=b.attributeName;c.attributeNamespace=b.attributeNamespace;c.oldValue=b.oldValue;t=c;t.oldValue=a;return t}function g(a,b,c){this.observer=a;this.target=b;this.options=c;this.transientObservedNodes=[]}var f=navigator.userAgent,f=-1<f.indexOf("MSIE ")||-1<f.indexOf("Trident/");a.MutationObserver=f?b:window.MutationObserver||window.WebKitMutationObserver||b;var m=Object.defineProperty,l=Date.now()%1E9,k=new (window.WeakMap||
function(){var a=function(){this.name="__st"+(1E9*Math.random()>>>0)+(l++ +"__")};a.prototype={set:function(a,b){var c=a[this.name];c&&c[0]===a?c[1]=b:m(a,this.name,{value:[a,b],writable:!0})},get:function(a){var b;return(b=a[this.name])&&b[0]===a?b[1]:void 0}};return a}()),n=window.setImmediate||window.msSetImmediate;if(!n){var q=[],r=String(Math.random());window.addEventListener("message",function(a){a.data===r&&(a=q,q=[],a.forEach(function(a){a()}))});n=function(a){for(var b=1;b<arguments.length;b++);
q.push(a);window.postMessage(r,"*");return 0}}var s=!1,v=[],u=0;b.prototype={observe:function(a,b){a=window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(a)||a;if(!b.childList&&!b.attributes&&!b.characterData||b.attributeOldValue&&!b.attributes||b.attributeFilter&&b.attributeFilter.length&&!b.attributes||b.characterDataOldValue&&!b.characterData)throw new SyntaxError;var c=k.get(a);c||k.set(a,c=[]);for(var e,f=0;f<c.length;f++)if(c[f].observer===this){e=c[f];e.removeListeners();e.options=
b;break}e||(e=new g(this,a,b),c.push(e),this.nodes_.push(a));e.addListeners()},disconnect:function(){this.nodes_.forEach(function(a){a=k.get(a);for(var b=0;b<a.length;b++){var c=a[b];if(c.observer===this){c.removeListeners();a.splice(b,1);break}}},this);this.records_=[]},takeRecords:function(){var a=this.records_;this.records_=[];return a}};var p=function(){return function(a,b){this.type=a;this.target=b;this.addedNodes=[];this.removedNodes=[];this.oldValue=this.attributeNamespace=this.attributeName=
this.nextSibling=this.previousSibling=null}}(),y,t;g.prototype={enqueue:function(a){var b=this.observer.records_,c=b.length;if(0<b.length){var e=b[c-1];e=e===a?e:!t||e!==t&&e!==y?null:t;if(e){b[c-1]=e;return}}else v.push(this.observer),s||(s=!0,n(h));b[c]=a},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(a){var b=this.options;b.attributes&&a.addEventListener("DOMAttrModified",this,!0);b.characterData&&a.addEventListener("DOMCharacterDataModified",this,!0);b.childList&&
a.addEventListener("DOMNodeInserted",this,!0);(b.childList||b.subtree)&&a.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(a){var b=this.options;b.attributes&&a.removeEventListener("DOMAttrModified",this,!0);b.characterData&&a.removeEventListener("DOMCharacterDataModified",this,!0);b.childList&&a.removeEventListener("DOMNodeInserted",this,!0);(b.childList||b.subtree)&&a.removeEventListener("DOMNodeRemoved",this,!0)},
addTransientObserver:function(a){if(a!==this.target){this.addListeners_(a);this.transientObservedNodes.push(a);var b=k.get(a);b||k.set(a,b=[]);b.push(this)}},removeTransientObservers:function(){var a=this.transientObservedNodes;this.transientObservedNodes=[];a.forEach(function(a){this.removeListeners_(a);a=k.get(a);for(var b=0;b<a.length;b++)if(a[b]===this){a.splice(b,1);break}},this)},handleEvent:function(a){switch(a.type){case "DOMAttrModified":var b=a.attrName,f=a.relatedNode.namespaceURI,g=a.target,
d=y=new p("attributes",g);d.attributeName=b;d.attributeNamespace=f;var m=a.attrChange===MutationEvent.ADDITION?null:a.prevValue;c(g,function(a){if(a.attributes&&(!a.attributeFilter||!a.attributeFilter.length||-1!==a.attributeFilter.indexOf(b)||-1!==a.attributeFilter.indexOf(f)))return a.attributeOldValue?e(m):d});break;case "DOMCharacterDataModified":g=a.target;d=y=new p("characterData",g);m=a.prevValue;c(g,function(a){if(a.characterData)return a.characterDataOldValue?e(m):d});break;case "DOMNodeRemoved":this.addTransientObserver(a.target);
case "DOMNodeInserted":var g=a.relatedNode,k=a.target,h;"DOMNodeInserted"===a.type?(a=[k],h=[]):(a=[],h=[k]);var l=k.previousSibling,k=k.nextSibling,d=y=new p("childList",g);d.addedNodes=a;d.removedNodes=h;d.previousSibling=l;d.nextSibling=k;c(g,function(a){if(a.childList)return d})}y=t=void 0}}})(l||(l={}));(function(a){var h=function(){function d(c,b,e){void 0===e&&(e=function(a,b){});this._ctx=c;this._blocker=b;this._visitor=e;this._sentDomSnapshot=!1;this._records=[];this._blockedDims={};this._wnd=
c.getWindow();this._encoder=new a.NodeEncoder(b)}d.prototype.hookMutations=function(c){var b=this;void 0===c&&(c=this._wnd.document);this._root=c;this._sentDomSnapshot=!1;this._lz=new a.LZJGWEncoder;this._observer=new a.MutationObserver(function(a){b._records=b._records.concat(a)});this._observer.observe(c,{childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0})};d.prototype.shutdown=function(){this._observer&&this._observer.disconnect();var c=a.mirrorFor(this._root);
c&&a.clearIds(c);this._records=[]};d.prototype.processMutations=function(){if(!this._root)return[];var c=this._ctx.now(),b=[];this._sentDomSnapshot||(this.genInsert(c,b,null,this._root,null),this.resizeRelatedBlockedElements(c,b,this._root),this._sentDomSnapshot=!0);if(0==this._records.length)return b;var e={},g={};this.processRecords(c,b,g,e);for(var f in g){var d=f.split(":");b.push({Kind:a.EVENT_MUT_ATTR,When:c,Args:[parseInt(d[0]),d[1],g[f]]})}for(f in e)b.push({Kind:a.EVENT_MUT_TEXT,When:c,Args:[parseInt(f),
e[f]]});this._records=[];return b};d.prototype.processRecords=function(c,b,e,g){for(var f={},d={},h=0;h<this._records.length;++h)try{var k=this._records[h],l=a.fsid(k.target);if(l)switch(f[l]=k.target,k.type){case "childList":if(0<k.removedNodes.length)for(var q=0;q<k.removedNodes.length;++q){var r=a.mirrorFor(k.removedNodes[q]);r&&r.id&&r.parent==a.mirrorFor(k.target)&&r.next==a.mirrorFor(k.nextSibling)&&this.genRemove(c,b,r)}l&&(d[l]=k.target);break;case "characterData":var s=k.target.textContent;
k.oldValue!=s&&(a.isBlocked(k.target)||(g[l]=s));break;case "attributes":var v=k.attributeName||"",u=v.toLowerCase();if(k.target.hasAttribute(v)){var p=k.target.getAttribute(v);k.oldValue!=p&&(p=this.rewriteAttr(k.target,u,p||""),null!==p&&(e[l+":"+u]=p))}else e[l+":"+u]=null}}catch(y){}for(var t in d)e=d[t],(g=a.mirrorFor(e))&&g.id&&this.diff(c,b,e,g.child,e.firstChild);for(t in f)e=f[t],this.resizeRelatedBlockedElements(c,b,e)};d.prototype.diff=function(c,b,e,g,f){for(var d=[];g&&f;){var h=a.mirrorFor(f);
a.fsid(f)?g.id==h.id?(g=g.next,f=f.nextSibling):(d.push({remove:g}),g=g.next):(d.push({insert:[e,f,g.node]}),f=f.nextSibling)}for(;g;g=g.next)d.push({remove:g});for(;f;f=f.nextSibling)d.push({insert:[e,f,null]});for(e=0;e<d.length;e++)g=d[e],g.insert?this.genInsert(c,b,g.insert[0],g.insert[1],g.insert[2]):g.remove&&this.genRemove(c,b,g.remove)};d.prototype.resizeRelatedBlockedElements=function(c,b,e){var g=a.mirrorFor(e);if(g){e=[g];for(g=0;e.length&&1E3>++g;){var f=e.pop();if(a.isBlocked(f.node))this.addPlaceholderResize(c,
b,f.node);else if(f.blockedChildSet)for(var d in f.blockedChildSet)a.windex.Object.prototype.hasOwnProperty.call(f.blockedChildSet,d)&&e.push(f.blockedChildSet[d])}a.assert(1E3>g,"Searching for blocked descendants is fast")}else{for(d=e;d&&!a.fsid(d);)d=d.parentNode;d&&a.isBlocked(d)&&this.addPlaceholderResize(c,b,d)}};d.prototype.addPlaceholderResize=function(c,b,e){try{var g=e.getBoundingClientRect(),f=Math.floor(g.width),d=Math.floor(g.height),h=a.fsid(e),k=this._blockedDims[h];k&&k.w==f&&k.h==
d||(this._blockedDims[h]={w:f,h:d},b.push({When:c,Kind:a.EVENT_PLACEHOLDER_SIZE,Args:[h,f,d]}))}catch(l){}};d.prototype.genInsert=function(c,b,e,g,f){var d=this;if(e&&a.isBlocked(e))return null;var h=a.fsid(e)||-1,k=a.fsid(f)||-1;e=this._encoder.tokenizeNode(e,f,g,function(a){d._visitor(c,a)});0<e.length&&b.push({When:c,Kind:a.EVENT_MUT_INSERT,Args:[h,k,this._lz.encode(e)]})};d.prototype.genRemove=function(c,b,e){var g=e.id;a.removeMirror(e);if(0<b.length&&(e=b[b.length-1],e.Kind==a.EVENT_MUT_REMOVE)){e.Args.push(g);
return}b.push({When:c,Kind:a.EVENT_MUT_REMOVE,Args:[g]})};d.prototype.rewriteAttr=function(c,b,e){return a.isBlocked(c)?a.rewriteBlockedAttribute(c,b,e,this._blocker):e};return d}();a.MutationWatcher=h})(l||(l={}));(function(a){a.gatherPerformanceStats=function(){for(var a=[],d=0,c="connectEnd connectStart domComplete domContentLoadedEventEnd domContentLoadedEventStart domInteractive domLoading domainLookupEnd domainLookupStart fetchStart loadEventEnd loadEventStart navigationStart redirectEnd redirectStart requestStart responseEnd responseStart secureConnectionStart unloadEventEnd unloadEventStart".split(" ");d<
c.length;d++){var b=c[d],b=performance.timing&&performance.timing[b],b=void 0==b?-1:b;a.push(b)}return a}})(l||(l={}));(function(a){var h=function(){function d(c,b,e,g){var f=this;this._ctx=c;this._queue=b;this._blocker=e;this._onFrameCreated=g;this._clientHeight=this._clientWidth=this._curWindowScrollY=this._curWindowScrollX=-1;this._curInnerWidth=0;this._scrollTimeouts={};this._quirks=!1;this._listeners=new a.DomListeners;this._initialized=!1;this._wnd=c.getWindow();this._doc=this._wnd.document;
this._loc=this._wnd.location;this._hst=this._wnd.history;this._quirks="BackCompat"==this._doc.compatMode;this._currentUrl=this._loc.href;this._inputWatcher=new a.InputWatcher(function(a){f.addChangeElem(a)},function(b){return!!a.fsid(b)});this._mutWatcher=new a.MutationWatcher(c,e,function(a,b){f.visitNode(a,b)})}d.prototype.watchEvents=function(){var c=this;this._mutWatcher.hookMutations();this._inputWatcher.hookEvents();this._listeners.add(this._wnd,"mousemove",!0,function(a){c.addMouseMove(a)});
this._listeners.add(this._wnd,"mousedown",!0,function(a){c.addMouseDown(a)});this._listeners.add(this._wnd,"mouseup",!0,function(a){c.addMouseUp(a)});this._listeners.add(this._wnd,"keydown",!0,function(a){c.addKeyDown(a)});this._listeners.add(this._wnd,"keyup",!0,function(a){c.addKeyUp(a)});this._listeners.add(this._wnd,"click",!0,function(a){c.addClick(a)});this._listeners.add(this._wnd,"dblclick",!0,function(a){c.addDblClick(a)});this._listeners.add(this._wnd,"focus",!0,function(a){c.addFocus(a)});
this._listeners.add(this._wnd,"blur",!0,function(a){c.addBlur(a)});this._listeners.add(this._wnd,"change",!0,function(a){c.addChange(a)});this._listeners.add(this._wnd,"touchstart",!0,function(b){c.addTouchEvent(b,a.EVENT_TOUCHSTART);c.addWindowScroll()});this._listeners.add(this._wnd,"touchend",!0,function(b){c.addTouchEvent(b,a.EVENT_TOUCHEND);c.addWindowScroll()});this._listeners.add(this._wnd,"touchmove",!0,function(b){c.addTouchEvent(b,a.EVENT_TOUCHMOVE);c.addWindowScroll()});this._listeners.add(this._wnd,
"touchcancel",!0,function(b){c.addTouchEvent(b,a.EVENT_TOUCHCANCEL)});this._listeners.add(this._wnd,"play",!0,function(b){c.addPlayPauseEvent(b,a.EVENT_PLAY)});this._listeners.add(this._wnd,"pause",!0,function(b){c.addPlayPauseEvent(b,a.EVENT_PAUSE)});this._listeners.add(this._wnd,"scroll",!1,function(a){c.addWindowScroll()});this._listeners.add(this._wnd,"resize",!1,function(a){c.addResize()});this._listeners.add(this._wnd,"submit",!1,function(a){c.addFormSubmit(a)});this._listeners.add(this._wnd,
"focus",!1,function(a){c.addWindowFocus(a)});this._listeners.add(this._wnd,"blur",!1,function(a){c.addWindowBlur(a)});this._listeners.add(this._wnd,"popstate",!1,function(){c.addNavigate()});this._hst.pushState&&(this._pushHook=a.activateHook(this._hst,"pushState").afterSync(function(){return c.addNavigate()}),this._replaceHook=a.activateHook(this._hst,"replaceState").afterSync(function(){return c.addNavigate()}));this._initialized=!0};d.prototype.onDomLoad=function(){this.addDomLoaded();this.addResize()};
d.prototype.onLoad=function(){this.addPerformanceData();this.addLoad();this.addResize()};d.prototype.bundleEvents=function(){this._inputWatcher.tick();this.addWindowInnerWidth();return this._mutWatcher.processMutations()};d.prototype.shutdown=function(){this._initialized&&(this._initialized=!1,this._listeners.clear(),this._pushHook&&this._pushHook.disable(),this._replaceHook&&this._replaceHook.disable(),this._inputWatcher.shutdown(),this._mutWatcher.shutdown())};d.prototype.docElem=function(){return this._doc.documentElement};
d.prototype.visitNode=function(c,b){var e=this;switch(b.nodeName){case "HTML":this._docElScrollListener&&this._listeners.remove(this._docElScrollListener),this._docElScrollListener=this._listeners.add(b,"scroll",!0,function(a){e.addScroll(a)});case "BODY":this.addResize();a.initWindex(this._wnd);break;case "INPUT":case "TEXTAREA":case "SELECT":this._inputWatcher.addInput(b);break;case "FRAME":case "IFRAME":this._onFrameCreated(b);break;case "VIDEO":case "AUDIO":b.paused||this.addPlayPauseEventById(a.fsid(b),
a.EVENT_PLAY)}};d.prototype.addMouseMove=function(c){c=a.fsid(c.target)?[c.clientX,c.clientY,a.fsid(c.target)]:[c.clientX,c.clientY];this._queue.enqueue(a.EVENT_MOUSEMOVE,c)};d.prototype.addMouseDown=function(c){this._queue.enqueue(a.EVENT_MOUSEDOWN,[c.clientX,c.clientY])};d.prototype.addMouseUp=function(c){this._queue.enqueue(a.EVENT_MOUSEUP,[c.clientX,c.clientY])};d.prototype.addTouchEvent=function(a,b){if(void 0!==a.changedTouches)for(var e=0;e<a.changedTouches.length;++e){var g=a.changedTouches[e];
isNaN(parseInt(g.identifier))&&(g.identifier=0);this._queue.enqueue(b,[g.identifier,g.clientX,g.clientY])}};d.prototype.addPlayPauseEvent=function(c,b){var e=a.fsid(c.target);e&&this.addPlayPauseEventById(e,b)};d.prototype.addPlayPauseEventById=function(a,b){this._queue.enqueue(b,[a])};d.prototype.addWindowFocus=function(c){this._queue.enqueue(a.EVENT_WINDOW_FOCUS,[])};d.prototype.addWindowBlur=function(c){this._queue.enqueue(a.EVENT_WINDOW_BLUR,[])};d.prototype.maybeAddValueChange=function(){var a=
this._doc.activeElement;if(a)this._inputWatcher.onChange(a)};d.prototype.addKeyDown=function(c){var b=this._doc.activeElement;if(!b||a.fsidIfNotBlocked(b))this.maybeAddValueChange(),this._queue.enqueue(a.EVENT_KEYDOWN,[c.keyCode])};d.prototype.addKeyUp=function(c){var b=this._doc.activeElement;if(!b||a.fsidIfNotBlocked(b))this.maybeAddValueChange(),this._queue.enqueue(a.EVENT_KEYUP,[c.keyCode])};d.prototype.addWindowInnerWidth=function(){var c=this._wnd.innerWidth;c!=this._curInnerWidth&&(this._queue.enqueue(a.EVENT_INNERWIDTH,
[c]),this._curInnerWidth=c)};d.prototype.doWorkInScrollTimeout=function(c,b){var e=this;c in this._scrollTimeouts||(this._scrollTimeouts[c]=b,setTimeout(function(){if(c in e._scrollTimeouts){var a=e._scrollTimeouts[c];delete e._scrollTimeouts[c];a()}},a.ScrollSampleInterval))};d.prototype._fireScrollTimeouts=function(){for(var a in this._scrollTimeouts)this._scrollTimeouts[a](),delete this._scrollTimeouts[a];this._scrollTimeouts=[]};d.prototype.addWindowScroll=function(){var c=this,b=a.fsid(this._doc.body);
b&&this.doWorkInScrollTimeout(b,function(){var e,g;"pageXOffset"in c._wnd?(e=c._wnd.pageXOffset,g=c._wnd.pageYOffset):(e=c._doc.body.scrollLeft,g=c._doc.body.scrollTop);if(e!=c._curWindowScrollX||g!=c._curWindowScrollY)c._queue.enqueue(a.EVENT_SCROLL,[b,e,g]),c._curWindowScrollX=e,c._curWindowScrollY=g;c.addWindowInnerWidth()})};d.prototype.addScroll=function(c){var b=this,e=c.target,g=a.fsid(e);g&&this.doWorkInScrollTimeout(g,function(){b._queue.enqueue(a.EVENT_SCROLL,[g,e.scrollLeft,e.scrollTop])})};
d.prototype.addResize=function(){if(this._doc.body){var c,b;this._quirks?(c=this._doc.body.clientWidth,b=this._doc.body.clientHeight):(c=this.docElem().clientWidth,b=this.docElem().clientHeight);if(c!=this._clientWidth||b!=this._clientHeight)this._clientWidth=c,this._clientHeight=b,c=Math.max(this._wnd.innerWidth||-1,this._clientWidth),this.isMediaValue("width",c)||(c=this.findMediaValue("width",c,c+128)||c),b=Math.max(this._wnd.innerHeight,this._clientHeight),this.isMediaValue("height",b)||(b=this.findMediaValue("height",
b,b+128)||b),c==this._clientWidth&&b==this._clientHeight?this._queue.enqueue(a.EVENT_RESIZE,[this._clientWidth,this._clientHeight]):this._queue.enqueue(a.EVENT_RESIZE,[this._clientWidth,this._clientHeight,c,b])}};d.prototype.isMediaValue=function(a,b){if(!this._wnd.matchMedia)return!0;var e=this._wnd.matchMedia("(min-"+a+": "+b+"px)");if(!e)return!0;var g=this._wnd.matchMedia("(max-"+a+": "+b+"px)");return g?e.matches&&g.matches:!0};d.prototype.findMediaValue=function(a,b,e){if(!this._wnd.matchMedia)return 0;
for(;b<e;){var g=Math.floor((b+e)/2);if(this._wnd.matchMedia("(min-"+a+": "+g+"px)").matches){if(this._wnd.matchMedia("(max-"+a+": "+g+"px)").matches)return g;b=g+1}else e=g-1}return 0};d.prototype.addDomLoaded=function(){this._queue.enqueue(a.EVENT_DOMLOADED,[])};d.prototype.addLoad=function(){this._queue.enqueue(a.EVENT_LOAD,[])};d.prototype.addPerformanceData=function(){window.performance&&window.performance.timing&&this._queue.enqueue(a.NAVIGATION_TIMING,a.gatherPerformanceStats())};d.prototype.addNavigate=
function(){var c=this._loc.href;this._currentUrl!=c&&(this._currentUrl=c,this._queue.enqueue(a.EVENT_NAVIGATE,[this._loc.href,this._doc.title]))};d.prototype.addClick=function(c){var b=c.target,e=a.fsid(b);e&&(b=b.getBoundingClientRect(),this._queue.enqueue(a.EVENT_CLICK,[e,c.clientX,c.clientY,b.left,b.top,b.width,b.height]))};d.prototype.addDblClick=function(c){(c=a.fsid(c.target))&&this._queue.enqueue(a.EVENT_DBL_CLICK,[c])};d.prototype.addFormSubmit=function(c){(c=a.fsid(c.target))&&this._queue.enqueue(a.EVENT_FORM_SUBMIT,
[c])};d.prototype.addFocus=function(c){(c=a.fsid(c.target))&&this._queue.enqueue(a.EVENT_FOCUS,[c])};d.prototype.addBlur=function(c){(c=a.fsid(c.target))&&this._queue.enqueue(a.EVENT_BLUR,[c])};d.prototype.addChange=function(a){this._inputWatcher.onChange(a.target)};d.prototype.addChangeElem=function(c){var b=a.fsidIfNotBlocked(c);b&&this._queue.enqueue(a.EVENT_VALUECHANGE,[b,a.valueOfInputishElem(c)])};return d}();a.EventWatcher=h})(l||(l={}));(function(a){function h(b){try{var c=a.parseJson(b);
if("__fs"in c)return c.__fs}catch(e){}return[]}function d(a){var b=a.src;return!a.hasAttribute("src")||"about:blank"==b||0==b.indexOf("javascript:")||0==b.indexOf(c)}a.FS_REQUEST_FRAME_ID="RequestFrameId";a.FS_SET_FRAME_ID_CMD="SetFrameId";a.FS_IFRAME_EVENTS="EvtBundle";a.FS_SHUTDOWN_FRAME="ShutdownFrame";a.FS_RESTART_FRAME="RestartFrame";var c=location.protocol+"//"+location.host;a.defaultInjector=function(c,e,g,d){a.logIfDebug("Injecting into Frame ["+c.src+"]");try{if(c.id==c.name&&b.test(c.id))a.logIfDebug("Blacklisted iframe: "+
c.src);else if(c.src&&("about:blank"!=c.src&&0>c.src.indexOf("javascript:"))&&c.src!=c.contentWindow.location.href)a.logIfDebug("Frame not yet loaded: "+c.src);else if(c.contentWindow[a.Namespace(c.contentWindow)])a.logIfDebug("FS already defined in Frame contentWindow: "+c.src+". Ignoring.");else{var h=c.contentWindow,l=c.contentDocument;h._fs_org=e;h._fs_host=g;h._fs_debug=a.isDebug();h._fs_run_in_iframe=!0;var r=l.createElement("script");r.async=!0;r.src=d+"//"+g+"/s/fs.js";"testdrive"==e&&(r.src+=
"?allowMoo=true");l.head.appendChild(r)}}catch(s){a.logIfDebug("iFrame no injecty. Probably not same origin.")}};var b=/^fb\d{18}$/,e;(function(a){a[a.NoInfoYet=1]="NoInfoYet";a[a.Enabled=2]="Enabled";a[a.Disabled=3]="Disabled"})(e=a.GetCurrentSessionEnabledState||(a.GetCurrentSessionEnabledState={}));var g=function(){function b(c,g,d,f){var h=this;this._ctx=c;this._injector=f;this._iFrames=[];this._pendingChildFrameIdInits=[];this._listeners=new a.DomListeners;this._getCurrentSessionEnabled=e.NoInfoYet;
this._blocker=new a.Blocker;this._transport=d(c,function(){h.shutdown()});this._queue=new a.EventQueue(c,this._transport,function(){return h._eventWatcher.bundleEvents()},g);this._eventWatcher=new a.EventWatcher(c,this._queue,this._blocker,function(a){h.onFrameCreated(a)});this._consoleWatcher=new a.ConsoleWatcher(this._queue,c.getWindow());this._protocol=c.getProtocol();this._host=c.getHost();this._orgId=c.getOrgId();this._identity=c.getIdentity();this._wnd=c.getWindow()}b.prototype.start=function(b,
c){var e=this;this._onFullyStarted=c;this._blocker.addPredicateRule({Selector:function(b){var c=a.tagName(b);if("object"==c)c="data";else if("embed"==c)c="src";else return!1;return!(A.IMAGE_FILENAME.test(b[c])&&(!b.type||0==b.type.lastIndexOf("image",0)))},Kind:a.NYI_KIND});this._blocker.addRule({Selector:"canvas",Kind:a.NYI_KIND});this._blocker.addRule({Selector:"noscript",Kind:a.BLOCKED_KIND});this._blocker.addRule({Selector:".fs-hide",Kind:a.HIDE_KIND});this._consoleWatcher.enable();"onpagehide"in
this._wnd?this._listeners.add(this._wnd,"pagehide",!1,function(a){e._queue.addUnload()}):this._listeners.add(this._wnd,"unload",!1,function(a){e._queue.addUnload()});this._listeners.add(this._wnd,"message",!1,function(a){"string"==typeof a.data&&e.postMessageReceived(a.source,h(a.data))})};b.prototype.getCurrentSessionEnabled=function(){return this._getCurrentSessionEnabled};b.prototype.queue=function(){return this._queue};b.prototype.eventWatcher=function(){return this._eventWatcher};b.prototype.console=
function(){return this._consoleWatcher};b.prototype.onDomLoad=function(){this._eventWatcher.onDomLoad()};b.prototype.onLoad=function(){this._eventWatcher.onLoad()};b.prototype.shutdown=function(){this._queue.shutdown();this._eventWatcher.shutdown();this._consoleWatcher.disable();this._listeners.clear();this.tellAllFramesTo([a.FS_SHUTDOWN_FRAME])};b.prototype.tellAllFramesTo=function(b){for(var c=0;c<this._iFrames.length;c++){var e=this._iFrames[c].contentWindow;e&&e.postMessage&&e.postMessage(a.stringify({__fs:b}),
"*")}};b.prototype.fullyStarted=function(){this._onFullyStarted()};b.prototype.flushPendingChildFrameInits=function(){if(0<this._pendingChildFrameIdInits.length){for(var a=0;a<this._pendingChildFrameIdInits.length;a++)this._pendingChildFrameIdInits[a]();this._pendingChildFrameIdInits=[]}};b.prototype.onFrameCreated=function(b){var c=this,e=a.fsid(b);e?(this._iFrames.push(b),d(b)?(a.logIfDebug("Attempting to setup Frame ["+b.src+"]"),this._injector(b,this._orgId,this._host,this._protocol),b.addEventListener("load",
function(e){a.logIfDebug("onload for frame ["+b.src+"]");c._injector(b,c._orgId,c._host,c._protocol)})):(a.logIfDebug("Frame Doesn't need injecting. Probably cross domain ["+b.src+"]"),b.contentWindow.postMessage&&(a.logIfDebug("Eagerly sending FrameId "+e+" to Frame ["+b.src+"]"),this.sendFrameIdToInnerFrame(b.contentWindow,e)))):a.logIfDebug("fsid missing or invalid for iFrame."+b.src)};b.prototype.postMessageReceived=function(b,c){switch(c[0]){case a.FS_IFRAME_EVENTS:var e=c[1];0<e.length&&this._transport.enqueueEvents(e);
break;case a.FS_REQUEST_FRAME_ID:e=this.iFrameWndToFsId(b),b&&e?(a.logIfDebug("Responding to FID request for frame "+e),this.sendFrameIdToInnerFrame(b,e)):a.logIfDebug("No FrameId found. Hoping to send one later.")}};b.prototype.sendFrameIdToInnerFrame=function(b,c){var e=this,g=function(){var g=[];0!=e._frameId&&(g=e._parentIds?e._parentIds.concat(e._frameId):[e._frameId]);g=[a.FS_SET_FRAME_ID_CMD,c,g,e._ctx.startTime(),e._blocker.rawRules,e._identity.cookieData(),e._pageId,e.getCurrentSessionEnabled()];
b&&b.postMessage&&b.postMessage(a.stringify({__fs:g}),"*")};null==this._frameId?this._pendingChildFrameIdInits.push(g):g()};b.prototype.iFrameWndToFsId=function(b){for(var c=0;c<this._iFrames.length;c++)if(this._iFrames[c].contentWindow==b)return a.fsid(this._iFrames[c]);a.logIfDebug("Unable to locate frame for window");return NaN};return b}();a.AbstractRecorder=g;a.parsePostMessageData=h})(l||(l={}));(function(a){function h(c,b){return new a.HttpEventTransport(c,b)}var d=function(c){function b(b,
g,d,m,l){void 0===g&&(g=a.RealTicker);void 0===d&&(d=new a.XHRPoster);void 0===m&&(m=h);void 0===l&&(l=a.defaultInjector);var k=c.call(this,b,g,m,l)||this;k._poster=d;k._domLoaded=!1;k._doc=k._wnd.document;k._frameId=0;k._getCurrentSessionEnabled=a.GetCurrentSessionEnabledState.NoInfoYet;a.set_fs_shutdown(k._wnd,function(a){k._queue.shutdown();a&&(a=k._doc.getElementById(a))&&a.setAttribute("_fs_embed_token",k._embedToken)});return k}B(b,c);b.prototype.onDomLoad=function(){c.prototype.onDomLoad.call(this);
this._domLoaded=!0;this.injectIntegrationScript()};b.prototype.start=function(b,g){var d=this;c.prototype.start.call(this,b,g);var h=this._doc.documentElement,l=a._fs_replay_flags(this._wnd),k=a.tryGetScreenDims(this._wnd),n=k[0],k=k[1],q="";b||(q=this._identity.userId());h={OrgId:this._identity.orgId(),UserId:q,Url:location.href,Base:a.baseUri(this._doc),Width:h.clientWidth,Height:h.clientHeight,ScreenWidth:n,ScreenHeight:k,Referrer:this._doc.referrer,Doctype:a.doctypeString(this._doc),CompiledTimestamp:a.CompiledTimestamp};
l&&(h.ReplayFlags=l);this._poster.post(this._protocol,this._host,"/rec/page",a.stringify(h),function(b){var c;try{c=a.parseJson(b)}catch(e){d.disableBecauseRecPageSaidSo();return}d.handleResponse(c);if(b=a._fs_ready(d._wnd))try{b()}catch(g){a.logIfDebug("exception in _fs_ready(): "+g)}for(b=0;b<c.Blocks.length;++b)try{a.BlockRule.isComment(c.Blocks[b].Selector)||d._blocker.addRule(c.Blocks[b])}catch(h){a.logIfDebug("Unexpected error parsing block rule. Skipping "+c.Blocks[b])}d._queue.enqueueFirst(a.EVENT_SET_FRAME_BASE,
[a.baseUri(d._doc),a.doctypeString(d._doc)]);d._queue.startPipeline(c.PageIntId);d.fullyStarted()},function(a){d.disableBecauseRecPageSaidSo()})};b.prototype.setIdsAndCookie=function(b){var c=this._identity;c.setIds(this._wnd,b.CookieDomain,b.UserIntId,b.SessionIntId);this._pageId=b.PageIntId;this._embedToken=b.EmbedToken;a.logIfDebug("/User,"+c.userId()+"/Session,"+c.sessionId()+"/Page,"+b.PageIntId)};b.prototype.injectIntegrationScript=function(){if(this._domLoaded&&this._integrationScript){var b=
this._doc.createElement("script");a._fs_csp(this._wnd)?b.src=this._protocol+this._host+"/rec/integrations?OrgId="+this._orgId:b.text=this._integrationScript;b.async=!0;this._doc.head.appendChild(b)}};b.prototype.handleResponse=function(b){this.setIdsAndCookie(b);this._integrationScript=b.IntegrationScript;this._getCurrentSessionEnabled=b.GetCurrentSessionEnabled?a.GetCurrentSessionEnabledState.Enabled:a.GetCurrentSessionEnabledState.Disabled;this.injectIntegrationScript()};b.prototype.disableBecauseRecPageSaidSo=
function(){this.shutdown();a.logIfDebug("Disabling FS.");var b=a._fs_ready(this._wnd);if(b)try{b(!0)}catch(c){a.logIfDebug("exception in _fs_ready(): "+c)}};return b}(a.AbstractRecorder);a.TopRecorder=d})(l||(l={}));(function(a){function h(c,b){return new a.PostMessageEventTransport(c.getWindow())}a.makeFrameTransport=h;var d=function(c){function b(b,d,f,m,l){void 0===d&&(d=a.RealTicker);void 0===f&&(f=new a.PostMessagePoster);void 0===m&&(m=h);void 0===l&&(l=a.defaultInjector);b=c.call(this,b,d,
m,l)||this;b._messagePoster=f;return b}B(b,c);b.prototype.start=function(a,b){c.prototype.start.call(this,a,b);this.sendRequestForFrameId()};b.prototype.postMessageReceived=function(b,d){c.prototype.postMessageReceived.call(this,b,d);switch(d[0]){case a.FS_SET_FRAME_ID_CMD:try{this.setFrameIdFromOutside(d[1],d[2],d[3],d[4],d[5],d[6],d[7])}catch(f){a.logIfDebug("Failed to parse frameId from message"+d)}}};b.prototype.sendRequestForFrameId=function(){this._frameId||(0==this._frameId?a.logIfDebug("For some reason the outer window attempted to request a frameId"):
this._wnd.parent?(a.logIfDebug("Asking for a frame ID from within frame: "+location.href),this._messagePoster.postMessage(this._wnd.parent,a.FS_REQUEST_FRAME_ID,[])):a.logIfDebug("Orphaned window. Location href = "+location.href))};b.prototype.setFrameIdFromOutside=function(b,c,d,h,l,k,n){if(b)if(this._frameId)a.logIfDebug("frame Id is already set to "+this._frameId+". Received second request to set it to "+b+" Iframe:"+location.href);else{a.logIfDebug("FrameId received within frame "+location.href+
": "+b);this._identity.initFromParsedCookie(l);this._getCurrentSessionEnabled=n||a.GetCurrentSessionEnabledState.NoInfoYet;this._frameId=b;this._parentIds=c;for(l=0;l<h.length;++l)this._blocker.addRule(h[l]);this._queue.enqueueFirst(a.EVENT_SET_FRAME_BASE,[a.baseUri(this._wnd.document),a.doctypeString(this._wnd.document)]);this._queue.rebaseIframe(d);this._ctx.setStartTime(d);this._pageId=k;this._queue.startPipeline(k,b,c);this.flushPendingChildFrameInits();this.fullyStarted()}else a.logIfDebug("Outer page gave us a bogus frame Id! Iframe: "+
location.href)};return b}(a.AbstractRecorder);a.InnerRecorder=d})(l||(l={}));(function(a){var h=function(){function c(){}c.prototype.createTopRecorder=function(b){return new a.TopRecorder(b)};c.prototype.createInnerRecorder=function(b){return new a.InnerRecorder(b)};return c}();a.DefaultRecorderMaker=h;var d=function(){function c(a,c){void 0===a&&(a=window);void 0===c&&(c=new h);this.wnd=a;this.recMaker=c;this.protocol="https:";this.domDoneLoaded=!1;this._startTime=this.wallTime();this.splitPending=
this.waitingOnStart=this.gotWindowScroll=!1;this.reidentifyCount=0}c.prototype.init=function(){a.isLoaded(this.wnd)||(a.initWindex(this.wnd),a.setLoaded(this.wnd,a.Namespace(this.wnd)),this.initApi(),this.start())};c.prototype.wallTime=function(){return(new Date).getTime()};c.prototype.now=function(){return this.wallTime()-this._startTime};c.prototype.startTime=function(){return this._startTime};c.prototype.setStartTime=function(a){this._startTime=a};c.prototype.maybeAddInitialScroll=function(){this.recorder&&
(!this.gotWindowScroll&&document.body&&a.fsid(document.body))&&(this.recorder.eventWatcher().addWindowScroll(),this.gotWindowScroll=!0)};c.prototype.getHost=function(){return this.host};c.prototype.getProtocol=function(){return this.protocol};c.prototype.getOrgId=function(){return this.orgId};c.prototype.getIdentity=function(){return this.identity};c.prototype.getVars=function(){return this.vars};c.prototype.getWindow=function(){return this.wnd};c.prototype.getCurrentSessionURL=function(b){if(!this.recorder)return null;
var c=this.recorder.getCurrentSessionEnabled();if(c==a.GetCurrentSessionEnabledState.NoInfoYet)return null;var d;d=this.identity.host();d=a.isLocalhost(a.domainFromHost(d))?d:0==d.indexOf("www.")?"app."+d.slice(4):"app."+d;if(c==a.GetCurrentSessionEnabledState.Disabled)return this.protocol+"//"+d+"/opt/upgrade";c=this.getCurrentSession();if(!c)return null;b&&(c+=":"+this.wallTime());return this.protocol+"//"+d+"/ui/"+this.identity.orgId()+"/session/"+encodeURIComponent(c)};c.prototype.getCurrentSession=
function(){if(!this.recorder)return null;var b=this.recorder.getCurrentSessionEnabled();return b!=a.GetCurrentSessionEnabledState.NoInfoYet&&b!=a.GetCurrentSessionEnabledState.Disabled&&this.identity.userId()?this.identity.userId()+":"+this.identity.sessionId():null};c.prototype.enableConsole=function(){this.recorder&&this.recorder.console().enable()};c.prototype.disableConsole=function(){this.recorder&&this.recorder.console().disable()};c.prototype.log=function(a){for(var c=[],d=1;d<arguments.length;d++)c[d-
1]=arguments[d];this.recorder&&("log"!==a&&("info"!==a&&"warn"!==a&&"error"!==a&&"debug"!==a)&&(c.unshift(a),a="log"),this.recorder.console().addLog(a,c))};c.prototype.shutdown=function(){this.recorder?(this.recorder.shutdown(),this.recorder=null):a.logIfDebug("Recording already shut down.")};c.prototype.restart=function(){this.recorder?a.logIfDebug("Recording already started."):this.createRecorder(!0)};c.prototype.splitPage=function(a){this.waitingOnStart?this.splitPending=!0:(this.shutdown(),a&&
this.identity.clear(),this.restart())};c.prototype._api=function(b,c){if(this.inFrame)a.logIfDebug("API calls may only be made from the top-most frame");else if(this.recorder){var d=this.vars.api(b,c),f=d[0];if(d[1]){if(8>this.reidentifyCount){this.reidentifyCount++;a.FS_q_push(this.wnd,[b,c]);this.splitPage(!0);return}a.logIfDebug("reidentified too many times; giving up")}for(d=0;d<f.length;d++)this.recorder.queue().enqueue(f[d].Kind,f[d].Args)}else a.FS_q_push(this.wnd,[b,c])};c.prototype._cookies=
function(){return this.identity.cookies()};c.prototype._setCookie=function(a,c){return this.identity.setCookie(a,c)};c.prototype.initApi=function(){var b=this.wnd[a.Namespace(this.wnd)];b.getCurrentSessionURL=a.$entry(this.getCurrentSessionURL,this);b.getCurrentSession=a.$entry(this.getCurrentSession,this);b.enableConsole=a.$entry(this.enableConsole,this);b.disableConsole=a.$entry(this.disableConsole,this);b.log=a.$entry(this.log,this);b.shutdown=a.$entry(this.shutdown,this);b.restart=a.$entry(this.restart,
this);b._api=a.$entry(this._api,this);b._cookies=a.$entry(this._cookies,this);b._setCookie=a.$entry(this._setCookie,this)};c.prototype.start=function(){var b=this;a.initDebug(this.wnd);a.logIfDebug("script version "+a.CompiledVersion+" (compiled at "+a.CompiledTimestamp+")");this.host=a._fs_host(this.wnd);this.orgId=a._fs_org(this.wnd);this.host?this.orgId?(a.logIfDebug("host: "+this.host),a.logIfDebug("orgid: "+this.orgId),"localhost:8080"==this.host&&(this.protocol="http:"),this.identity=new a.Identity,
this.inFrame||(this.vars=new a.Vars(this.identity),this.identity.initFromCookies(this.host,this.orgId)),this.canRecord(this.orgId)?(this.createRecorder().eventWatcher().watchEvents(),this.hookLoadEvents(),this.wnd.addEventListener("message",function(c){if("string"==typeof c.data)switch(a.parsePostMessageData(c.data)[0]){case a.FS_SHUTDOWN_FRAME:b.shutdown();break;case a.FS_RESTART_FRAME:b.restart()}})):this.hailMary()):a.logIfDebug("Missing global _fs_org. Recording disabled."):a.logIfDebug("Missing global _fs_host. Recording disabled.")};
c.prototype.createRecorder=function(b){var c=this;this._startTime=this.wallTime();var d,f;if(this.inFrame)this.recorder=this.recMaker.createInnerRecorder(this);else{this.recorder=this.recMaker.createTopRecorder(this);f=this.drainApiQueue(a.FS_q_drain(this.wnd));d=f[0];f=f[1];for(var h=0;h<d.length;h++)this.recorder.queue().enqueue(d[h].Kind,d[h].Args)}this.waitingOnStart=!0;this.recorder.start(f,function(){c.waitingOnStart=!1;b&&c.recorder&&c.recorder.tellAllFramesTo([a.FS_RESTART_FRAME]);c.splitPending&&
(c.splitPending=!1,c.splitPage())});b&&this.recorder.eventWatcher().watchEvents();return this.recorder};c.prototype.drainApiQueue=function(a){if(!a)return[[],!1];for(var c=!1,d=[],f=0;f<a.length;f++){var h=this.vars.api(a[f][0],a[f][1]),l=h[0];h[1]&&(d=[],c=!0);d=d.concat(l)}return[d,c]};c.prototype.determineFrameness=function(b){var c=a._fs_transport(this.wnd);a._fs_is_outer_script(this.wnd)?this.inFrame=!1:this.wnd!=top?this.inFrame=!0:c?c.init&&c.init(b)&&(this.inFrame=!0):this.inFrame=!1};c.prototype.canRecord=
function(b){this.determineFrameness(b);return this.wnd.MutationEvent&&this.wnd.postMessage?!this.inFrame||a._fs_run_in_iframe(this.wnd)||a._fs_transport(this.wnd)?!0:(a.logIfDebug("Fullstory recording for this page is NOT allowed within an iFrame."),!1):(a.logIfDebug("missing required browser features"),!1)};c.prototype.hailMary=function(){var b=this,c=document.documentElement,d=a._fs_replay_flags(this.wnd);a.logIfDebug("Unable to record playback stream.");var f=document.createElement("script");this.wnd.__fs_startResponse=
function(a){a&&b.identity.setIds(b.wnd,a.CookieDomain,a.UserIntId,a.SessionIntId);document.head.removeChild(f)};f.src="//"+this.host+"/rec/page?OrgId="+this.orgId+"&UserId="+this.identity.userId()+"&Url="+encodeURIComponent(location.href)+"&Base="+encodeURIComponent(a.baseUri(document))+"&Width="+c.clientWidth+"&Height="+c.clientHeight+"&ScreenWidth="+this.wnd.screen.width+"&ScreenHeight="+this.wnd.screen.height+"&Referrer="+encodeURIComponent(document.referrer)+"&Doctype="+encodeURIComponent(a.doctypeString(document))+
"&CompiledTimestamp="+a.CompiledTimestamp+"&Fallback=true"+(d?"&ReplayFlags="+d:"");document.head.appendChild(f)};c.prototype.hookLoadEvents=function(){var a=this,c=function(){a.domDoneLoaded||(a.domDoneLoaded=!0,a.recorder&&a.recorder.onDomLoad())},d=!1,f=function(){d||(d=!0,a.recorder&&a.recorder.onLoad())};switch(document.readyState){case "interactive":document.attachEvent||c();break;case "complete":c(),f()}this.domDoneLoaded||document.addEventListener("DOMContentLoaded",function(a){c()});d||this.wnd.addEventListener("load",
function(a){c();f()})};return c}();a.GlobalContext=d})(l||(l={}));try{(new l.GlobalContext).init()}catch(D){l.sendToBugsnag(D,"error"),l._fs_debug(window)&&window.console&&console.log&&console.log("Failed to initialize FullStory.")}})();
